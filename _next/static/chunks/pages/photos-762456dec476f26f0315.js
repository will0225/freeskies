_N_E=(window.webpackJsonp_N_E=window.webpackJsonp_N_E||[]).push([[25],{"0CpR":function(e,t,r){e.exports={container:"photos_container__2ZDCf",container_bg:"photos_container_bg__2vUHm",container_radius:"photos_container_radius__1sSEA",page_title:"photos_page_title__w5Nuo",content:"photos_content__3JBP5",photo_container:"photos_photo_container__1DLuo",photo:"photos_photo__14wlp",editWrapper:"photos_editWrapper__3QJ0-"}},XXki:function(e,t,r){(window.__NEXT_P=window.__NEXT_P||[]).push(["/photos",function(){return r("gQxN")}])},gQxN:function(e,t,r){"use strict";r.r(t),r.d(t,"default",(function(){return X}));var n=r("q1tI"),o=r.n(n),a=r("ODXe"),c=r("rePB"),s=r("KQm4"),i=r("o0o1"),u=r.n(i),l=r("HaE+"),p=r("TSYQ"),h=r.n(p),d=r("T/mL"),f=r("B3wi"),m=r("pVHP"),b=(r("wx14"),r("Ff2n"),r("9rZX"),r("J3NM"),r("a/fa"),r("5bA4"),r("UESt"),r("VZWS"),r("5rEg")),v=r("uoqP");o.a.createElement,b.a.TextArea;var k=r("0CpR"),_=r.n(k),g=r("jL+W"),w=r("NtVA"),O=r("Dlky"),j=r("tsqr"),x=r("2/Rp"),y=r("BvKs"),P=r("jsC+"),S=r("QMsE"),C=r("rOC1"),E=r("/MfK"),N=r("9mgU"),D=o.a.createElement;function T(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}var M=Object(g.a)((function(e){var t=e.auth,r=e.authServices,o=Object(n.useContext)(w.a),i=o[0],p=o[1],b=Object(n.useState)(!1),k=b[0],g=b[1],M=null===i||void 0===i?void 0:i.photosData.filter((function(e){return"Photo"===e.type})),I=function(){var e=Object(l.a)(u.a.mark((function e(n){var o,a,c;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Object(v.b)({method:"post",url:"/accounts/photos",headers:{"x-token":t.token}});case 3:o=e.sent,a=o.data,200===(c=o.status)?p(Object(O.c)(a)):403===c?r.refreshToken(I):j.b.error((null===a||void 0===a?void 0:a.message)||"Something wrong"),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),console.log(e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t){return e.apply(this,arguments)}}(),X=function(){var e=Object(l.a)(u.a.mark((function e(n){var o,a,c;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Object(v.b)({method:"post",url:"/photos",data:n,headers:{"x-token":t.token}});case 3:o=e.sent,a=o.data,201===(c=o.status)?(g(0),p(Object(O.c)([].concat(Object(s.a)(i.photosData),[a])))):403===c?r.refreshToken(X):j.b.error((null===a||void 0===a?void 0:a.message)||"Something wrong"),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),console.log(e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t){return e.apply(this,arguments)}}(),A=function(){var e=Object(l.a)(u.a.mark((function e(r){var n,o,a,c;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Object(v.b)({method:"delete",url:"/photos",data:{id:r},headers:{"x-token":t.token}});case 3:n=e.sent,o=n.data,204===(a=n.status)?(c=null===i||void 0===i?void 0:i.photosData.filter((function(e){return e.id!==r})),p(Object(O.c)(c)),j.b.success("Deleted successfully!")):403===a?j.b.error("Please refresh page!"):j.b.error((null===o||void 0===o?void 0:o.message)||"Something wrong"),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),console.log(e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t){return e.apply(this,arguments)}}(),B=function(){var e=Object(l.a)(u.a.mark((function e(n,o,a){var c,s,l,h,d;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c="","Photo"===n?c="/photos/react":"VideoClip"===n?c="/video-clips/react":"Item"===n?c="/items/react":"Post"===n?c="/posts/react":"Comment"===n?c="/comments/react":"Share"===n?c="/shares/react":"MarketplaceItemForSale"===n?c="/marketplace/items-for-sale/react":"MarketplaceItemToBuy"===n&&(c="/marketplace/items-to-buy/react"),e.prev=2,e.next=5,Object(v.b)({method:"post",url:c,data:{reacted:o,reaction:a},headers:{"x-token":t.token}});case 5:if(s=e.sent,l=s.data,201!==(h=s.status)){e.next=11;break}d=null===i||void 0===i?void 0:i.photosData.map((function(e,t){if(e.id===o)return e.reactions[0].reaction,e;p(Object(O.c)(d))})),e.next=17;break;case 11:if(403!=h){e.next=15;break}r.refreshToken(),e.next=17;break;case 15:throw j.b.error((null===l||void 0===l?void 0:l.message)||"Something wrong"),new Error;case 17:e.next=22;break;case 19:e.prev=19,e.t0=e.catch(2),console.log(e.t0);case 22:case"end":return e.stop()}}),e,null,[[2,19]])})));return function(t,r,n){return e.apply(this,arguments)}}(),Q=function(){var e=Object(l.a)(u.a.mark((function e(n,o){var a,c,s;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a="","Photo"===n?a="/photos/share":"VideoClip"===n?a="/video-clips/share":"Item"===n?a="/items/share":"Post"===n?a="/posts/share":"Comment"===n?a="/comments/share":"Share"===n?a="/posts/share":"MarketplaceItemForSale"===n?a="/marketplace/items-for-sale/share":"MarketplaceItemToBuy"===n&&(a="/marketplace/items-to-buy/share"),e.prev=2,e.next=5,Object(v.b)({method:"post",url:a,data:{shared:o},headers:{"x-token":t.token}});case 5:if(c=e.sent,s=c.data,201!==c.status){e.next=11;break}j.b.success("Shared successfully"),e.next=17;break;case 11:if(403!=satus){e.next=15;break}r.refreshToken(),e.next=17;break;case 15:throw j.b.error((null===s||void 0===s?void 0:s.message)||"Something wrong"),new Error;case 17:e.next=22;break;case 19:e.prev=19,e.t0=e.catch(2),console.log(e.t0);case 22:case"end":return e.stop()}}),e,null,[[2,19]])})));return function(t,r){return e.apply(this,arguments)}}(),V=function(e){var r=null===i||void 0===i?void 0:i.photosData.map((function(r){if(r.id==e.id){var n=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?T(Object(r),!0).forEach((function(t){Object(c.a)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):T(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({account:t.user},e.comments[0]);return"undefined"==typeof r.comments?r.comments=[n]:r.comments.push(n),r.commentsCount+=e.commentsCount,r}}));p(Object(O.c)(r))};Object(n.useEffect)((function(){I()}),[]);var J=Object(d.b)((function(e){var r=e.in;return D(w.b,null,D(m.a,{title:"Photo detail",showModal:r,onClose:q,data:M,profilePhoto:!0,likeAction:B,shareAction:Q,onUpdateTimeline:V,auth:t}))})),W=Object(a.a)(J,2),U=W[0],q=W[1];return D("div",null,D(f.a,null),D("div",{className:h()(_.a.container,_.a.container_bg,_.a.container_radius)},D("div",{className:_.a.page_title},"Photos",D(x.a,{style:{float:"right",background:"transparent",color:"#0d7ac7"},onClick:function(){return g(!0)}},"Add Photos/Video")),D("div",{className:_.a.content},M.map((function(e){var t=D(y.a,null,D(y.a.Item,{onClick:function(){return A(e.id)}},D(E.a,{style:{fontSize:20}})," ",D("span",null,"Delete Photo")));return D("div",{className:_.a.photo_container,key:e.id},D("div",{className:_.a.photo},D("img",{src:"https://www.freeskies.com/static/".concat(e.blob_tn),alt:"",style:{width:"100%",height:"100%"},onClick:function(){return U()}}),D(P.a,{overlay:t,trigger:["click"]},D("div",{className:_.a.editWrapper},D(N.a,{style:{color:"white",position:"relative",display:"block",marginTop:4}})))))})))),D(C.a,{title:"Create Photos",showModal:k,onClose:function(){return g(!1)}},D(S.a,{onPosting:X})))})),I=o.a.createElement;function X(){return I("div",null,I(w.b,null,I(M,null)))}}},[["XXki",0,2,4,1,3,6,5,7,8,9,14]]]);