_N_E=(window.webpackJsonp_N_E=window.webpackJsonp_N_E||[]).push([[22],{"W+IF":function(e,t,a){"use strict";a.r(t),a.d(t,"default",(function(){return V}));var n=a("q1tI"),o=a.n(n),s=(a("KQm4"),a("o0o1")),r=a.n(s),l=a("HaE+"),c=a("G9ce"),i=a.n(c),u=a("TSYQ"),d=a.n(u),m=a("tsqr"),p=a("GzdX"),v=a("uoqP"),b=a("o3/p"),f=a("Bfm4"),h=a("A9a1"),g=a("+eX/"),x=a("jL+W"),N=a("ZvkC"),w=a("67A/"),k=a("ffwR"),O=(a("4nr2"),a("rePB")),y=a("Ff2n"),j=a("9rZX"),_=a.n(j),C={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm165.4 618.2l-66-.3L512 563.4l-99.3 118.4-66.1.3c-4.4 0-8-3.5-8-8 0-1.9.7-3.7 1.9-5.2l130.1-155L340.5 359a8.32 8.32 0 01-1.9-5.2c0-4.4 3.6-8 8-8l66.1.3L512 464.6l99.3-118.4 66-.3c4.4 0 8 3.5 8 8 0 1.9-.7 3.7-1.9 5.2L553.5 514l130 155c1.2 1.5 1.9 3.3 1.9 5.2 0 4.4-3.6 8-8 8z"}}]},name:"close-circle",theme:"filled"},P=a("6VBw"),S=function(e,t){return n.createElement(P.a,Object.assign({},e,{ref:t,icon:C}))};S.displayName="CloseCircleFilled";var E=n.forwardRef(S),B=a("a/fa"),R=a.n(B),T=o.a.createElement;_.a.setAppElement("#modal_place");var I={content:{},overlay:{backgroundColor:"rgba(50, 50, 50, .8)"}};function z(e){var t=e.children,a=e.showModal,n=e.narrow_container,o=e.title,s=Object(y.a)(e,["children","showModal","narrow_container","title"]);return console.log(o,t,a),T(_.a,{isOpen:a,style:I,className:d()(R.a.modal_content,Object(O.a)({},R.a.narrow,n)),shouldCloseOnOverlayClick:!0,onRequestClose:s.onClose},T("div",{className:R.a.header},T("div",{className:R.a.title},T("p",null,o)),T("button",{className:R.a.close,type:"button",onClick:s.onClose},T(E,null))),T("div",{className:R.a.content},t))}a("VIWY");var A=a("Lp5N"),L=o.a.createElement;var M=Object(x.a)((function(e){var t,a,o=e.auth,s=Object(n.useState)([]),c=(s[0],s[1],Object(n.useContext)(N.a)),u=c[0],x=c[1],O=Object(n.useState)(1),y=O[0],j=O[1],_=Object(n.useState)(!1),C=_[0],P=_[1],S=Object(n.useState)(!1),E=S[0],B=S[1],R=function(){var e=Object(l.a)(r.a.mark((function e(t){var a,n,s,l,c=arguments;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=c.length>1&&void 0!==c[1]&&c[1],e.prev=1,a||x(Object(w.c)(!0)),e.next=5,Object(v.a)({method:"post",url:"/accounts/timeline",headers:{"x-token":o.token}});case 5:n=e.sent,s=n.data,l=n.status,console.log("getFriends_data=",s,"getFriends_status=",l),200===l?(x(Object(w.b)(s)),console.log("=========")):403===l?(console.log("================= Refresh token !"),authServices.refreshToken(R)):m.b.error((null===s||void 0===s?void 0:s.message)||"Something wrong"),a||x(Object(w.c)(!1)),e.next=16;break;case 12:e.prev=12,e.t0=e.catch(1),console.log(e.t0),a||x(Object(w.c)(!1));case 16:case"end":return e.stop()}}),e,null,[[1,12]])})));return function(t){return e.apply(this,arguments)}}(),T=function(){var e=Object(l.a)(r.a.mark((function e(t){var a,n,s,l,c=arguments;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=c.length>1&&void 0!==c[1]&&c[1],e.prev=1,a||x(Object(w.c)(!0)),e.next=5,Object(v.a)({method:"get",url:"/accounts",headers:{"x-token":o.token}});case 5:n=e.sent,s=n.data,l=n.status,console.log("getAccount_data=",s,"getAccount_status=",l),200===l?(x(Object(w.a)(s)),console.log("=========")):403===l?(console.log("================= Refresh token !"),authServices.refreshToken(R)):m.b.error((null===s||void 0===s?void 0:s.message)||"Something wrong"),a||x(Object(w.c)(!1)),e.next=16;break;case 12:e.prev=12,e.t0=e.catch(1),console.log(e.t0),a||x(Object(w.c)(!1));case 16:case"end":return e.stop()}}),e,null,[[1,12]])})));return function(t){return e.apply(this,arguments)}}(),I=function(){var e=Object(l.a)(r.a.mark((function e(t){var a,n,s;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,x(Object(w.c)(!0,"posting")),e.next=4,Object(v.a)({method:"post",url:"/posts",data:t,headers:{"x-token":o.token}});case 4:return a=e.sent,n=a.data,s=a.status,console.log(n,s),201===s?T():m.b.error((null===n||void 0===n?void 0:n.message)||"Something wrong"),x(Object(w.c)(!1,"posting")),e.next=11,a;case 11:return e.abrupt("return",e.sent);case 14:e.prev=14,e.t0=e.catch(0),x(Object(w.c)(!1,"posting"));case 17:case"end":return e.stop()}}),e,null,[[0,14]])})));return function(t){return e.apply(this,arguments)}}(),M=function(){var e=Object(l.a)(r.a.mark((function e(t,a,n){var s,l,c,i;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log(t,a,n),e.prev=1,x(Object(w.c)(!0,"posting")),s="","Photo"===t?s="/photos/rate":"VideoClip"===t?s="/video-clips/rate":"Item"===t?s="/items/rate":"Post"===t?s="/posts/rate":"Comment"===t&&(s="/comments/rate"),e.next=7,Object(v.a)({method:"post",url:s,data:{rated:a,rating:n},headers:{"x-token":o.token}});case 7:return l=e.sent,c=l.data,i=l.status,console.warn("ratePost",c,i),201===i?(T(),m.b.success("Evaluate successfully")):m.b.error((null===c||void 0===c?void 0:c.message)||"Something wrong"),x(Object(w.c)(!1,"posting")),e.next=14,l;case 14:return e.abrupt("return",e.sent);case 17:e.prev=17,e.t0=e.catch(1),x(Object(w.c)(!1,"posting"));case 20:case"end":return e.stop()}}),e,null,[[1,17]])})));return function(t,a,n){return e.apply(this,arguments)}}();Object(n.useEffect)((function(){R(o.token),T(o.token)}),[]);var F=u.accountData,V=window.matchMedia("only screen and (max-width: 640px)").matches,D=(null!==F&&void 0!==F&&"url(https://www.freeskies.com/static/".concat(null===(t=F.profileBackgroundImage)||void 0===t?void 0:t.src,")"),null!==F&&void 0!==F?"".concat(null===(a=F.profilePhoto)||void 0===a?void 0:a.src):null),G=Math.round((null===F||void 0===F?void 0:F.rating)||0),W=function(){P(!0)},X=function(){var e=Object(l.a)(r.a.mark((function e(t){var a,n;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,x(Object(w.c)(!0)),e.next=4,Object(v.a)({method:"PUT",url:"/accounts",data:t,headers:{"x-token":o.token}});case 4:return a=e.sent,n=a.data,201===a.status?T():m.b.error((null===n||void 0===n?void 0:n.message)||"Something wrong"),x(Object(w.c)(!1)),e.next=10,a;case 10:return e.abrupt("return",e.sent);case 13:e.prev=13,e.t0=e.catch(0),x(Object(w.c)(!1));case 16:case"end":return e.stop()}}),e,null,[[0,13]])})));return function(t){return e.apply(this,arguments)}}();return L("div",{className:i.a.container},L("div",{className:i.a.left},"undefined"!==typeof F?L("div",{className:i.a.profile},L("div",{className:i.a.avatar},L("div",{className:i.a.avatar_image},L(k.a,{size:V?100:140,url:D,text:null===F||void 0===F?void 0:F.username}))),L("div",{className:i.a.user_content},L("div",{className:i.a.user_info},L("div",{className:i.a.heade_section},L("div",{className:i.a.left_side},L("p",{className:i.a.fullname,style:{cursor:"pointer"},onClick:function(){return B(!0)}},L("span",null,"".concat(null===F||void 0===F?void 0:F.firstName," ").concat(null===F||void 0===F?void 0:F.lastName)))),L("div",{className:i.a.right_side},L("p",{className:i.a.rating},L(p.a,{defaultValue:G,style:{color:"#fadb14",fontSize:"30px"}}),L("span",{className:i.a.rating_text},G))))))):L("div",{className:"border border-gray-300 shadow rounded-md p-4 max-w-sm w-full mx-auto"},L("div",{className:"animate-pulse flex space-x-4"},L("div",{className:"rounded-full bg-gray-400 h-12 w-12"}),L("div",{className:"flex-1 space-y-4 py-1"},L("div",{className:"h-4 bg-gray-400 rounded w-3/4"}),L("div",{className:"space-y-2"},L("div",{className:"h-4 bg-gray-400 rounded"}),L("div",{className:"h-4 bg-gray-400 rounded w-5/6"}))))),L("div",{className:i.a.profile_content},L("ul",{className:"flex border-b"},L("li",{className:d()("mr-1",i.a.tab),onClick:function(){return j(1)},style:{borderBottom:1==y?"5px solid white":"none"}},L("a",{className:"inline-block py-2 px-4 text-blue-500 hover:text-blue-800 font-semibold"},"ACTIVITY")),L("li",{className:d()("mr-1",i.a.tab),onClick:function(){return j(2)},style:{borderBottom:2==y?"5px solid white":"none"}},L("a",{className:"inline-block py-2 px-4 text-blue-500 hover:text-blue-800 font-semibold"},"Groups")),L("li",{className:d()("mr-1",i.a.tab),onClick:function(){return j(6)},style:{borderBottom:6==y?"5px solid white":"none"}},L("a",{className:"inline-block py-2 px-4 text-blue-500 hover:text-blue-800 font-semibold"},"Markets")),L("li",{className:d()("mr-1",i.a.tab),onClick:function(){return j(3)},style:{borderBottom:3==y?"5px solid white":"none"}},L("a",{className:"inline-block py-2 px-4 text-blue-500 hover:text-blue-800 font-semibold"},"PHOTOS")),L("li",{className:d()("mr-1",i.a.tab),onClick:function(){return j(4)},style:{borderBottom:4==y?"5px solid white":"none"}},L("a",{className:"inline-block py-2 px-4 text-blue-500 hover:text-blue-800 font-semibold"},"RATES")),L("li",{className:d()("mr-1",i.a.tab),onClick:function(){return j(5)},style:{borderBottom:5==y?"5px solid white":"none"}},L("a",{className:"inline-block py-2 px-4 text-blue-500 hover:text-blue-800 font-semibold"},"FRIENDS"))),1==y?L("div",{className:i.a.activity},L("div",{className:i.a.createPostDiv},L(k.a,{size:50,url:D}),L("input",{className:i.a.createPostInput,placeholder:"What's on your mind?",onClick:W})),L(f.a,{user:F,onRatePost:M,onUpdateTimeline:T})):null,5==y?L("div",{className:d()(i.a.friends_list,i.a.sections_content)},null===F||void 0===F?void 0:F.friends.map((function(e,t){return L("div",{className:i.a.friend,key:t},L(k.a,{size:80,url:null===e||void 0===e?void 0:e.profilePhoto,text:null===e||void 0===e?void 0:e.username,style:{marginRight:0}}),L("div",{className:i.a.friend_name},L("p",{style:{textAlign:"left",fontSize:20}},e.firstName," ",e.lastName),L(p.a,{defaultValue:e.rating,style:{color:"#fadb14",fontSize:"15px"}})))}))):null,3==y?L(b.a,{user:F,onRatePost:M}):null,4==y?L(g.a,{user:F,onRatePost:M}):null)),L("div",{className:i.a.right}),L(z,{title:"Create Post",showModal:C,onClose:function(){return P(0)}},L(h.a,{loading:u.postingLoading,onPosting:I,modalPopup:W})),L(z,{title:"Edit Profile",showModal:E,onClose:function(){return B(0)}},L(A.a,{onUpdate:X,loading:u.postingLoading})))})),F=o.a.createElement;function V(){return F("div",null,F(N.b,null,F(M,null)))}},u1GD:function(e,t,a){(window.__NEXT_P=window.__NEXT_P||[]).push(["/profile",function(){return a("W+IF")}])}},[["u1GD",0,2,5,11,1,4,3,7,6,9,8,10,12,13]]]);