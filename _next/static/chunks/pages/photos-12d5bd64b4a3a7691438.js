_N_E=(window.webpackJsonp_N_E=window.webpackJsonp_N_E||[]).push([[20],{"0CpR":function(t,o,e){t.exports={container:"photos_container__2ZDCf",container_bg:"photos_container_bg__2vUHm",container_radius:"photos_container_radius__1sSEA",page_title:"photos_page_title__w5Nuo",content:"photos_content__3JBP5",photo_container:"photos_photo_container__1DLuo",photo:"photos_photo__14wlp"}},XXki:function(t,o,e){(window.__NEXT_P=window.__NEXT_P||[]).push(["/photos",function(){return e("gQxN")}])},gQxN:function(t,o,e){"use strict";e.r(o),e.d(o,"default",(function(){return I}));var n=e("q1tI"),a=e.n(n),r=e("TSYQ"),s=e.n(r),i=e("T/mL"),c=e("B3wi"),p=e("pVHP"),l=e("0CpR"),_=e.n(l),u=e("jL+W"),h=e("rePB"),d=a.a.createElement;function g(t,o){var e=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);o&&(n=n.filter((function(o){return Object.getOwnPropertyDescriptor(t,o).enumerable}))),e.push.apply(e,n)}return e}function b(t){for(var o=1;o<arguments.length;o++){var e=null!=arguments[o]?arguments[o]:{};o%2?g(Object(e),!0).forEach((function(o){Object(h.a)(t,o,e[o])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(e)):g(Object(e)).forEach((function(o){Object.defineProperty(t,o,Object.getOwnPropertyDescriptor(e,o))}))}return t}const f={loading:!1,postingLoading:!1,photosData:[]};function v(t,{type:o,payload:e}){switch(o){case"photos/SET_LOADING":return b(b({},t),{},{loading:e});case"photos/SET_POSTING_LOADING":return b(b({},t),{},{postingLoading:e});case"photos/SET_PHOTOS_DATA":return b(b({},t),{},{photosData:e});default:return t}}const O=Object(n.createContext)([{},()=>{}]),w=({children:t})=>{const o=Object(n.useReducer)(v,f);return d(O.Provider,{value:o},t)};var y=t=>({type:"photos/SET_PHOTOS_DATA",payload:t}),m=e("uoqP"),j=e("tsqr"),P=e("2/Rp"),T=e("5rEg"),S=e("ZTPi"),E=e("VZWS"),N=e("jXTy"),k=e.n(N),D=a.a.createElement;const{TextArea:C}=T.a,{TabPane:x}=S.a;function A({onPosting:t,loading:o}){const{0:e,1:a}=Object(n.useState)(""),{0:r,1:s}=Object(n.useState)([]),i=t=>{s(t)};return D("div",{className:k.a.activity_posting},D("div",null,D(C,{value:e,onChange:t=>{a(t.target.value)},placeholder:"Write a photo caption",autoSize:{minRows:2,maxRows:5},style:{color:"white"}}),D("div",{className:k.a.file_place},D(E.a,{files:r,onChange:i}))),D("div",{className:k.a.actions_container},D(P.a,{type:"primary",loading:o,onClick:async()=>{try{let n;const s=new FormData;for(var o=0;o<r.length;o++)s.append("file",r[o]);0!==e.length&&s.append("caption",e),n=s,t(n),i([]),a("")}catch(n){console.log(n)}},style:{width:"100%",fontSize:"20px",height:"50px",borderRadius:"6px"}},"Create")))}var X=e("rOC1"),L=a.a.createElement;var R=Object(u.a)((function({auth:t,authServices:o}){const{0:e,1:a}=Object(n.useContext)(O),{0:r,1:l}=Object(n.useState)([]),{0:u,1:h}=Object(n.useState)(!1),d=async e=>{try{const e=await Object(m.a)({method:"post",url:"/accounts/photos",headers:{"x-token":t.token}}),{data:n,status:r}=e;200===r?a(y(n)):403===r?o.refreshToken(d):j.b.error((null===n||void 0===n?void 0:n.message)||"Something wrong")}catch(n){console.log(n)}},g=async n=>{try{const r=await Object(m.a)({method:"post",url:"/photos",data:n,headers:{"x-token":t.token}}),{data:s,status:i}=r;201===i?(h(0),a(y([...e.photosData,s]))):403===i?o.refreshToken(g):j.b.error((null===s||void 0===s?void 0:s.message)||"Something wrong")}catch(r){console.log(r)}};Object(n.useEffect)(()=>{d()},[]);const[b,f]=Object(i.b)(({in:t})=>L(p.a,{title:"Photo detail",showModal:t,onClose:f,data:null===e||void 0===e?void 0:e.photosData}));return L("div",null,L(c.a,null),L("div",{className:s()(_.a.container,_.a.container_bg,_.a.container_radius)},L("div",{className:_.a.page_title},"Photos",L(P.a,{style:{float:"right",background:"transparent",color:"#0d7ac7"},onClick:()=>h(!0)},"Add Photos/Video")),L("div",{className:_.a.content},null===e||void 0===e?void 0:e.photosData.map(t=>L("div",{className:_.a.photo_container,key:t.id,onClick:()=>b()},L("div",{className:_.a.photo},L("img",{src:"https://www.freeskies.com/static/".concat(t.src),alt:""})))))),L(X.a,{title:"Create Photos",showModal:u,onClose:()=>h(0)},L(A,{onPosting:g})))})),H=a.a.createElement;function I(){return H("div",null,H(w,null,H(R,null)))}},jXTy:function(t,o,e){t.exports={activity_posting:"posting-photos_activity_posting__3Ww9-",actions_container:"posting-photos_actions_container__z4y_4","button-container":"posting-photos_button-container__1aTEK","ant-btn-primary":"posting-photos_ant-btn-primary__14JVQ",file_place:"posting-photos_file_place__34jvT"}}},[["XXki",0,2,5,1,3,4,6,7,8]]]);