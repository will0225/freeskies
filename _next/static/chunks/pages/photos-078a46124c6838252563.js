_N_E=(window.webpackJsonp_N_E=window.webpackJsonp_N_E||[]).push([[20],{"0CpR":function(e,t,o){e.exports={container:"photos_container__2ZDCf",container_bg:"photos_container_bg__2vUHm",container_radius:"photos_container_radius__1sSEA",page_title:"photos_page_title__w5Nuo",content:"photos_content__3JBP5",photo_container:"photos_photo_container__1DLuo",photo:"photos_photo__14wlp"}},B3wi:function(e,t,o){"use strict";var a=o("q1tI"),n=o.n(a),r=o("Tyw5"),s=o.n(r),i=o("nOHt"),c=o("TSYQ"),l=o.n(c),d=o("LvDl"),u=o.n(d),p=o("/MKj"),_=o("ffwR"),h=n.a.createElement;function v({user:e={}}){const t=Object(i.useRouter)();return h("div",{className:s.a.profile,onClick:()=>{t.push("/profile")}},h("div",{className:s.a.avatar},(null===e||void 0===e?void 0:e.profilePhoto)?h(_.a,{size:40,url:null===e||void 0===e?void 0:e.profilePhoto.src,text:null===e||void 0===e?void 0:e.username}):h(_.a,{size:40,text:null===e||void 0===e?void 0:e.firstName})),h("span",{className:s.a.name},"".concat(null===e||void 0===e?void 0:e.firstName)))}t.a=Object(p.b)(e=>({user:e.auth.user}))((function({withoutSearch:e,user:t}){const{0:o,1:r}=Object(a.useState)(0),{0:i,1:c}=Object(a.useState)(!0);let d=null;const p=()=>{try{window.pageYOffset;d&&clearTimeout(d),d=setTimeout(()=>{d=null,c(!0)},500),i&&c(!1)}catch(e){console.log(e)}};return Object(a.useEffect)(()=>{try{window.addEventListener("scroll",u.a.throttle(p,250))}catch(e){console.log(e)}return()=>{try{window.removeEventListener("scroll",p)}catch(e){console.log(e)}}},[o]),h(n.a.Fragment,null,h("div",{className:l()(s.a.header,{[s.a.header_hidden]:!i})},h("div",{className:s.a.container},h("div",{className:s.a.logo},h("img",{src:"/logo.png",alt:"logo"})),h("div",{className:s.a.search},!e&&h(n.a.Fragment,null,h("input",{name:"search",placeholder:"Search Freeskies"}),h(v,null))),h(v,{user:t}))),h("div",{className:s.a.additional_header}))}))},Tyw5:function(e,t,o){e.exports={additional_header:"header_additional_header__Wyu42",header:"header_header__ecC39",header_hidden:"header_header_hidden__2Q2DD",container:"header_container__bXWQQ",logo:"header_logo__2MPw_",search:"header_search__sw4Be",profile:"header_profile__1JSwu",name:"header_name__3HhTm",avatar:"header_avatar__boSZH"}},XXki:function(e,t,o){(window.__NEXT_P=window.__NEXT_P||[]).push(["/photos",function(){return o("gQxN")}])},gQxN:function(e,t,o){"use strict";o.r(t),o.d(t,"default",(function(){return H}));var a=o("q1tI"),n=o.n(a),r=o("TSYQ"),s=o.n(r),i=o("T/mL"),c=o("B3wi"),l=o("pVHP"),d=o("0CpR"),u=o.n(d),p=o("jL+W"),_=o("rePB"),h=n.a.createElement;function v(e,t){var o=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),o.push.apply(o,a)}return o}function g(e){for(var t=1;t<arguments.length;t++){var o=null!=arguments[t]?arguments[t]:{};t%2?v(Object(o),!0).forEach((function(t){Object(_.a)(e,t,o[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(o)):v(Object(o)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(o,t))}))}return e}const m={loading:!1,postingLoading:!1,photosData:[]};function f(e,{type:t,payload:o}){switch(t){case"photos/SET_LOADING":return g(g({},e),{},{loading:o});case"photos/SET_POSTING_LOADING":return g(g({},e),{},{postingLoading:o});case"photos/SET_PHOTOS_DATA":return g(g({},e),{},{photosData:o});default:return e}}const b=Object(a.createContext)([{},()=>{}]),w=({children:e})=>{const t=Object(a.useReducer)(f,m);return h(b.Provider,{value:t},e)};var O=e=>({type:"photos/SET_PHOTOS_DATA",payload:e}),y=o("uoqP"),j=o("tsqr"),N=o("2/Rp"),P=o("5rEg"),S=o("ZTPi"),T=o("VZWS"),C=o("jXTy"),E=o.n(C),k=n.a.createElement;const{TextArea:D}=P.a,{TabPane:x}=S.a;function A({onPosting:e,loading:t}){const{0:o,1:n}=Object(a.useState)(""),{0:r,1:s}=Object(a.useState)([]),i=e=>{s(e)};return k("div",{className:E.a.activity_posting},k("div",null,k(D,{value:o,onChange:e=>{n(e.target.value)},placeholder:"Write a photo caption",autoSize:{minRows:2,maxRows:5},style:{color:"white"}}),k("div",{className:E.a.file_place},k(T.a,{files:r,onChange:i}))),k("div",{className:E.a.actions_container},k(N.a,{type:"primary",loading:t,onClick:async()=>{try{let a;const s=new FormData;for(var t=0;t<r.length;t++)s.append("file",r[t]);0!==o.length&&s.append("caption",o),a=s,e(a),i([]),n("")}catch(a){console.log(a)}},style:{width:"100%",fontSize:"20px",height:"50px",borderRadius:"6px"}},"Create")))}var L=o("rOC1"),R=n.a.createElement;var X=Object(p.a)((function({auth:e,authServices:t}){const{0:o,1:n}=Object(a.useContext)(b),{0:r,1:d}=Object(a.useState)([]),{0:p,1:_}=Object(a.useState)(!1),h=async o=>{try{const o=await Object(y.a)({method:"post",url:"/accounts/photos",headers:{"x-token":e.token}}),{data:a,status:r}=o;200===r?n(O(a)):403===r?t.refreshToken(h):j.b.error((null===a||void 0===a?void 0:a.message)||"Something wrong")}catch(a){console.log(a)}},v=async a=>{try{const r=await Object(y.a)({method:"post",url:"/photos",data:a,headers:{"x-token":e.token}}),{data:s,status:i}=r;201===i?n(O([...o.photosData,s])):403===i?t.refreshToken(v):j.b.error((null===s||void 0===s?void 0:s.message)||"Something wrong")}catch(r){console.log(r)}};Object(a.useEffect)(()=>{h()},[]);const[g,m]=Object(i.b)(({in:e})=>R(l.a,{title:"Photo detail",showModal:e,onClose:m,data:null===o||void 0===o?void 0:o.photosData}));return R("div",null,R(c.a,null),R("div",{className:s()(u.a.container,u.a.container_bg,u.a.container_radius)},R("div",{className:u.a.page_title},"Photos",R(N.a,{style:{float:"right",background:"transparent",color:"#0d7ac7"},onClick:()=>_(!0)},"Add Photos/Video")),R("div",{className:u.a.content},null===o||void 0===o?void 0:o.photosData.map(e=>R("div",{className:u.a.photo_container,key:e.id,onClick:()=>g()},R("div",{className:u.a.photo},R("img",{src:"https://www.freeskies.com/static/".concat(e.src),alt:""})))))),R(L.a,{title:"Create Photos",showModal:p,onClose:()=>_(0)},R(A,{onPosting:v})))})),Q=n.a.createElement;function H(){return Q("div",null,Q(w,null,Q(X,null)))}},jXTy:function(e,t,o){e.exports={activity_posting:"posting-photos_activity_posting__3Ww9-",actions_container:"posting-photos_actions_container__z4y_4","button-container":"posting-photos_button-container__1aTEK","ant-btn-primary":"posting-photos_ant-btn-primary__14JVQ",file_place:"posting-photos_file_place__34jvT"}},rOC1:function(e,t,o){"use strict";o.d(t,"a",(function(){return g}));var a=o("rePB"),n=o("Ff2n"),r=o("q1tI"),s=o.n(r),i=o("9rZX"),c=o.n(i),l=o("4i/N"),d=o("a/fa"),u=o.n(d),p=o("TSYQ"),_=o.n(p),h=s.a.createElement;c.a.setAppElement("#modal_place");var v={content:{},overlay:{backgroundColor:"rgba(50, 50, 50, .8)"}};function g(e){var t=e.children,o=e.showModal,r=e.narrow_container,s=e.title,i=Object(n.a)(e,["children","showModal","narrow_container","title"]);return h(c.a,{isOpen:o,style:v,className:_()(u.a.modal_content,Object(a.a)({},u.a.narrow,r)),shouldCloseOnOverlayClick:!0,onRequestClose:i.onClose},h("div",{className:u.a.header},h("div",{className:u.a.title},h("p",{style:{color:"white"}},s)),h("button",{className:u.a.close,type:"button",onClick:i.onClose},h(l.a,null))),h("div",{className:u.a.content},t))}}},[["XXki",0,2,5,1,3,4,6,8]]]);