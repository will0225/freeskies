_N_E=(window.webpackJsonp_N_E=window.webpackJsonp_N_E||[]).push([[20],{"0CpR":function(e,t,a){e.exports={container:"photos_container__2ZDCf",container_bg:"photos_container_bg__2vUHm",container_radius:"photos_container_radius__1sSEA",page_title:"photos_page_title__w5Nuo",content:"photos_content__3JBP5",photo_container:"photos_photo_container__1DLuo",photo:"photos_photo__14wlp"}},B3wi:function(e,t,a){"use strict";var o=a("q1tI"),n=a.n(o),r=a("Tyw5"),s=a.n(r),i=a("nOHt"),c=a("TSYQ"),l=a.n(c),d=a("LvDl"),_=a.n(d),h=a("/MKj"),u=a("ffwR"),p=n.a.createElement;function m({user:e={}}){const t=Object(i.useRouter)();return p("div",{className:s.a.profile,onClick:()=>{t.push("/profile")}},p("div",{className:s.a.avatar},(null===e||void 0===e?void 0:e.profilePhoto)?p(u.a,{size:40,url:null===e||void 0===e?void 0:e.profilePhoto.src,text:null===e||void 0===e?void 0:e.username}):p(u.a,{size:40,text:null===e||void 0===e?void 0:e.firstName})),p("span",{className:s.a.name},"".concat(null===e||void 0===e?void 0:e.firstName)))}t.a=Object(h.b)(e=>({user:e.auth.user}))((function({withoutSearch:e,user:t}){const{0:a,1:r}=Object(o.useState)(0),{0:i,1:c}=Object(o.useState)(!0);let d=null;const h=()=>{try{window.pageYOffset;d&&clearTimeout(d),d=setTimeout(()=>{d=null,c(!0)},500),i&&c(!1)}catch(e){console.log(e)}};return Object(o.useEffect)(()=>{try{window.addEventListener("scroll",_.a.throttle(h,250))}catch(e){console.log(e)}return()=>{try{window.removeEventListener("scroll",h)}catch(e){console.log(e)}}},[a]),p(n.a.Fragment,null,p("div",{className:l()(s.a.header,{[s.a.header_hidden]:!i})},p("div",{className:s.a.container},p("div",{className:s.a.logo},p("img",{src:"/logo.png",alt:"logo"})),p("div",{className:s.a.search},!e&&p(n.a.Fragment,null,p("input",{name:"search",placeholder:"Search Freeskies"}),p(m,null))),p(m,{user:t}))),p("div",{className:s.a.additional_header}),p("div",{className:l()(s.a.mobile_profile_header,{[s.a.header_hidden]:!i})},p("div",{className:s.a.container},p(m,{user:t}))),p("div",{className:l()(s.a.mobile_top_header,{[s.a.header_hidden]:!i})},p("div",{className:s.a.container},p("div",{className:s.a.logo},p("img",{src:"/logo.png",alt:"logo"})),p("div",{className:s.a.search},!e&&p(n.a.Fragment,null,p("input",{name:"search",placeholder:"Search Freeskies"}))))))}))},Tyw5:function(e,t,a){e.exports={additional_header:"header_additional_header__Wyu42",header:"header_header__ecC39",header_hidden:"header_header_hidden__2Q2DD",container:"header_container__bXWQQ",logo:"header_logo__2MPw_",search:"header_search__sw4Be",profile:"header_profile__1JSwu",name:"header_name__3HhTm",avatar:"header_avatar__boSZH",mobile_profile_header:"header_mobile_profile_header__2TJiv",mobile_top_header:"header_mobile_top_header__3ihGH"}},XXki:function(e,t,a){(window.__NEXT_P=window.__NEXT_P||[]).push(["/photos",function(){return a("gQxN")}])},gQxN:function(e,t,a){"use strict";a.r(t),a.d(t,"default",(function(){return H}));var o=a("q1tI"),n=a.n(o),r=a("TSYQ"),s=a.n(r),i=a("T/mL"),c=a("B3wi"),l=a("pVHP"),d=a("0CpR"),_=a.n(d),h=a("jL+W"),u=a("rePB"),p=n.a.createElement;function m(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,o)}return a}function v(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?m(Object(a),!0).forEach((function(t){Object(u.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):m(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}const g={loading:!1,postingLoading:!1,photosData:[]};function f(e,{type:t,payload:a}){switch(t){case"photos/SET_LOADING":return v(v({},e),{},{loading:a});case"photos/SET_POSTING_LOADING":return v(v({},e),{},{postingLoading:a});case"photos/SET_PHOTOS_DATA":return v(v({},e),{},{photosData:a});default:return e}}const b=Object(o.createContext)([{},()=>{}]),w=({children:e})=>{const t=Object(o.useReducer)(f,g);return p(b.Provider,{value:t},e)};var O=e=>({type:"photos/SET_PHOTOS_DATA",payload:e}),y=a("uoqP"),N=a("tsqr"),j=a("2/Rp"),P=a("5rEg"),S=a("ZTPi"),T=a("VZWS"),C=a("jXTy"),E=a.n(C),k=n.a.createElement;const{TextArea:D}=P.a,{TabPane:x}=S.a;function A({onPosting:e,loading:t}){const{0:a,1:n}=Object(o.useState)(""),{0:r,1:s}=Object(o.useState)([]),i=e=>{s(e)};return k("div",{className:E.a.activity_posting},k("div",null,k(D,{value:a,onChange:e=>{n(e.target.value)},placeholder:"Write a photo caption",autoSize:{minRows:2,maxRows:5},style:{color:"white"}}),k("div",{className:E.a.file_place},k(T.a,{files:r,onChange:i}))),k("div",{className:E.a.actions_container},k(j.a,{type:"primary",loading:t,onClick:async()=>{try{let o;const s=new FormData;for(var t=0;t<r.length;t++)s.append("file",r[t]);0!==a.length&&s.append("caption",a),o=s,e(o),i([]),n("")}catch(o){console.log(o)}},style:{width:"100%",fontSize:"20px",height:"50px",borderRadius:"6px"}},"Create")))}var L=a("rOC1"),R=n.a.createElement;var X=Object(h.a)((function({auth:e,authServices:t}){const{0:a,1:n}=Object(o.useContext)(b),{0:r,1:d}=Object(o.useState)([]),{0:h,1:u}=Object(o.useState)(!1),p=async a=>{try{const a=await Object(y.a)({method:"post",url:"/accounts/photos",headers:{"x-token":e.token}}),{data:o,status:r}=a;200===r?n(O(o)):403===r?t.refreshToken(p):N.b.error((null===o||void 0===o?void 0:o.message)||"Something wrong")}catch(o){console.log(o)}},m=async o=>{try{const r=await Object(y.a)({method:"post",url:"/photos",data:o,headers:{"x-token":e.token}}),{data:s,status:i}=r;201===i?(u(0),n(O([...a.photosData,s]))):403===i?t.refreshToken(m):N.b.error((null===s||void 0===s?void 0:s.message)||"Something wrong")}catch(r){console.log(r)}};Object(o.useEffect)(()=>{p()},[]);const[v,g]=Object(i.b)(({in:e})=>R(l.a,{title:"Photo detail",showModal:e,onClose:g,data:null===a||void 0===a?void 0:a.photosData}));return R("div",null,R(c.a,null),R("div",{className:s()(_.a.container,_.a.container_bg,_.a.container_radius)},R("div",{className:_.a.page_title},"Photos",R(j.a,{style:{float:"right",background:"transparent",color:"#0d7ac7"},onClick:()=>u(!0)},"Add Photos/Video")),R("div",{className:_.a.content},null===a||void 0===a?void 0:a.photosData.map(e=>R("div",{className:_.a.photo_container,key:e.id,onClick:()=>v()},R("div",{className:_.a.photo},R("img",{src:"https://www.freeskies.com/static/".concat(e.src),alt:""})))))),R(L.a,{title:"Create Photos",showModal:h,onClose:()=>u(0)},R(A,{onPosting:m})))})),Q=n.a.createElement;function H(){return Q("div",null,Q(w,null,Q(X,null)))}},jXTy:function(e,t,a){e.exports={activity_posting:"posting-photos_activity_posting__3Ww9-",actions_container:"posting-photos_actions_container__z4y_4","button-container":"posting-photos_button-container__1aTEK","ant-btn-primary":"posting-photos_ant-btn-primary__14JVQ",file_place:"posting-photos_file_place__34jvT"}},rOC1:function(e,t,a){"use strict";a.d(t,"a",(function(){return v}));var o=a("rePB"),n=a("Ff2n"),r=a("q1tI"),s=a.n(r),i=a("9rZX"),c=a.n(i),l=a("4i/N"),d=a("a/fa"),_=a.n(d),h=a("TSYQ"),u=a.n(h),p=s.a.createElement;c.a.setAppElement("#modal_place");var m={content:{},overlay:{backgroundColor:"rgba(50, 50, 50, .8)"}};function v(e){var t=e.children,a=e.showModal,r=e.narrow_container,s=e.title,i=Object(n.a)(e,["children","showModal","narrow_container","title"]);return p(c.a,{isOpen:a,style:m,className:u()(_.a.modal_content,Object(o.a)({},_.a.narrow,r)),shouldCloseOnOverlayClick:!0,onRequestClose:i.onClose},p("div",{className:_.a.header},p("div",{className:_.a.title},p("p",{style:{color:"white"}},s)),p("button",{className:_.a.close,type:"button",onClick:i.onClose},p(l.a,null))),p("div",{className:_.a.content},t))}}},[["XXki",0,2,5,1,3,4,6,8]]]);