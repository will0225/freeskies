_N_E=(window.webpackJsonp_N_E=window.webpackJsonp_N_E||[]).push([[25],{A9a1:function(e,t,n){"use strict";n.d(t,"a",(function(){return _}));var r=n("rePB"),a=n("ODXe"),o=n("o0o1"),s=n.n(o),i=n("HaE+"),c=n("q1tI"),l=n.n(c),u=n("5rEg"),m=n("ZTPi"),p=n("2/Rp"),d=n("VZWS"),b=n("tsqr"),f=n("QWJe"),h=n.n(f),v=n("VIWY"),g=n("T/mL"),O=l.a.createElement,w=u.a.TextArea;m.a.TabPane;function _(e){var t=e.onPosting,n=e.loading,o=(e.PostingPost,Object(c.useState)("")),l=o[0],u=o[1],m=Object(c.useState)([]),f=m[0],_=m[1],j=function(){var e=Object(i.a)(s.a.mark((function e(){var n,r,a,o,i,c;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(e.prev=0,r=new FormData,a=0;a<f.length;a++)"image"===f[a].type.split("/")[0]?r.append("images",f[a]):r.append("videos",f[a]);return 0!==l.length&&r.append("text",l),n=r,e.next=7,t(n);case 7:o=e.sent,console.log(o),i=o.status,c=o.data,201===i?(b.b.success("Your post published successfuly"),y([]),u("")):b.b.error((null===c||void 0===c?void 0:c.message)||"Something wrong"),e.next=17;break;case 13:e.prev=13,e.t0=e.catch(0),console.log(e.t0),b.b.error("Please try again!");case 17:case"end":return e.stop()}}),e,null,[[0,13]])})));return function(){return e.apply(this,arguments)}}(),y=function(e){_(e)},k=Object(g.b)((function(e){var t=e.in;return O(v.a,Object(r.a)({title:"Photo detail",showModal:t,onClose:P,show:!0},"onClose",P))})),x=Object(a.a)(k,2),P=(x[0],x[1]);return O("div",{className:h.a.activity_posting},O("div",null,O(w,{value:l,onChange:function(e){u(e.target.value)},placeholder:"Write a message",autoSize:{minRows:2,maxRows:5}}),O("div",{className:h.a.file_place},O(d.a,{files:f,onChange:y}))),O("div",{className:h.a.actions_container},O(p.a,{type:"primary",loading:n,onClick:j,style:{width:"100%",fontSize:"20px",height:"50px",borderRadius:"6px"}},"Post")))}},"Dx8+":function(e,t,n){"use strict";n.r(t),n.d(t,"default",(function(){return W}));var r=n("q1tI"),a=n.n(r),o=n("KQm4"),s=n("rePB"),i=n("o0o1"),c=n.n(i),l=n("HaE+"),u=n("B3wi"),m=n("PObt"),p=n.n(m),d=n("A9a1"),b=n("qg42"),f=n.n(b),h=n("uoqP"),v=n("tsqr"),g=a.a.createElement;function O(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function w(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?O(Object(n),!0).forEach((function(t){Object(s.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):O(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var j={loading:!1,postingLoading:!1,timelineData:[]};function y(e,t){var n=t.type,r=t.payload;switch(n){case"timeline/SET_LOADING":return w(w({},e),{},{loading:r});case"timeline/SET_POSTING_LOADING":return w(w({},e),{},{postingLoading:r});case"timeline/SET_TIMELINE_DATA":return w(w({},e),{},{timelineData:r});default:return e}}var k=Object(r.createContext)([{},function(){}]),x=function(e){var t=e.children,n=Object(r.useReducer)(y,j);return g(k.Provider,{value:n},t)};function P(e){switch(e){case"timeline":return"timeline/SET_LOADING";case"posting":return"timeline/SET_POSTING_LOADING";default:return""}}var D=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"timeline";return{type:P(t),payload:e}},S=function(e){return{type:"timeline/SET_TIMELINE_DATA",payload:e}},E=n("FVaq"),T=n("jL+W"),C=n("rOC1"),I=n("ffwR"),N=a.a.createElement;function A(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function F(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?A(Object(n),!0).forEach((function(t){Object(s.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):A(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var L=Object(T.a)((function(e){var t,n=e.authServices,s=e.auth,i=Object(r.useContext)(k),m=i[0],b=i[1],g=Object(r.useState)(!1),O=g[0],w=g[1],j=Object(r.useState)(!1),y=(j[0],j[1]),x=function(){var e=Object(l.a)(c.a.mark((function e(t){var r,a,o,s,i,l=arguments;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=l.length>1&&void 0!==l[1]&&l[1],e.prev=1,r||b(D(!0)),e.next=5,Object(h.b)({method:"post",url:"/accounts/timeline",headers:{"x-token":t}});case 5:a=e.sent,o=a.data,200===(s=a.status)?(i=o.map((function(e){return e=P(e)})),b(S(i)),console.log("=========")):403===s?(console.log("================= Refresh token !"),n.refreshToken(x)):v.b.error((null===o||void 0===o?void 0:o.message)||"Something wrong"),r||b(D(!1)),e.next=15;break;case 11:e.prev=11,e.t0=e.catch(1),console.log(e.t0),r||b(D(!1));case 15:case"end":return e.stop()}}),e,null,[[1,11]])})));return function(t){return e.apply(this,arguments)}}(),P=function(e){return"Comment"===e.type?"Post"==e.commented.type?F(F({},e.commented),{},{comments:[F({},e)]}):"Comment"==e.commented.type?F(F({},e.commented.commented),{},{comments:[F(F({},e.commented),{},{comments:[e]})]}):"Share"==e.commented.type?F(F({},e.commented.shared),{},{comments:[F({},e)]}):F(F({},e.commented),{},{comments:[F({},e)]}):"Post"===e.type?e:"Share"===e.type?F(F({},e.shared),{},{shares:[F({},e)]}):e},T=function(){var e=Object(l.a)(c.a.mark((function e(t){var n,r,a,i;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,b(D(!0,"posting")),e.next=4,Object(h.b)({method:"post",url:"/posts",data:t,headers:{"x-token":s.token}});case 4:return n=e.sent,r=n.data,201===n.status?(w(!1),a=F(F({type:"Post"},r),{},{comments:[],commentsCount:0,rating:null,reactions:[],reactionsCount:0,shares:[],sharesCount:0,account:s.user}),i=[a].concat(Object(o.a)(m.timelineData)),console.log(i),b(S(i))):v.b.error((null===r||void 0===r?void 0:r.message)||"Something wrong"),b(D(!1,"posting")),e.next=10,n;case 10:return e.abrupt("return",e.sent);case 13:e.prev=13,e.t0=e.catch(0),b(D(!1,"posting"));case 16:case"end":return e.stop()}}),e,null,[[0,13]])})));return function(t){return e.apply(this,arguments)}}(),A=function(){var e=Object(l.a)(c.a.mark((function e(t,n,r){var a,o,i,l;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,b(D(!0,"posting")),a="","Photo"===t?a="/photos/rate":"VideoClip"===t?a="/video-clips/rate":"Item"===t?a="/items/rate":"Post"===t?a="/posts/rate":"Comment"===t?a="/comments/rate":"MarketplaceItemForSale"===t?a="/marketplace/items-for-sale/rate":"MarketplaceItemToBuy"===t&&(a="/marketplace/items-to-buy/rate"),e.next=6,Object(h.b)({method:"post",url:a,data:{id:n,rating:r},headers:{"x-token":s.token}});case 6:return o=e.sent,i=o.data,l=o.status,console.warn("ratePost",i,l),201===l?(m.timelineData.map((function(e){if(e.id===n&&e.type===t)return e.rating=r,e})),b(S(m.timelineData))):v.b.error((null===i||void 0===i?void 0:i.message)||"Something wrong"),b(D(!1,"posting")),e.next=13,o;case 13:return e.abrupt("return",e.sent);case 16:e.prev=16,e.t0=e.catch(0),b(D(!1,"posting"));case 19:case"end":return e.stop()}}),e,null,[[0,16]])})));return function(t,n,r){return e.apply(this,arguments)}}(),L=function(){w(!0)},M=function(){var e=Object(l.a)(c.a.mark((function e(t,n,r){var a,o,i;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a="","Photo"===t?a="/photos/react":"VideoClip"===t?a="/video-clips/react":"Item"===t?a="/items/react":"Post"===t?a="/posts/react":"Comment"===t?a="/comments/react":"Share"===t?a="/shares/react":"MarketplaceItemForSale"===t?a="/marketplace/items-for-sale/react":"MarketplaceItemToBuy"===t&&(a="/marketplace/items-to-buy/react"),e.prev=2,e.next=5,Object(h.b)({method:"post",url:a,data:{reacted:n,reaction:r},headers:{"x-token":s.token}});case 5:if(o=e.sent,i=o.data,201!==o.status){e.next=11;break}v.b.success("Added successfully"),e.next=13;break;case 11:throw v.b.error((null===i||void 0===i?void 0:i.message)||"Something wrong"),new Error;case 13:e.next=18;break;case 15:e.prev=15,e.t0=e.catch(2),console.log(e.t0);case 18:case"end":return e.stop()}}),e,null,[[2,15]])})));return function(t,n,r){return e.apply(this,arguments)}}(),W=function(){var e=Object(l.a)(c.a.mark((function e(t,n){var r,a,o;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r="","Photo"===t?r="/photos/share":"VideoClip"===t?r="/video-clips/share":"Item"===t?r="/items/share":"Post"===t?r="/posts/share":"Comment"===t?r="/comments/share":"Share"===t?r="/posts/share":"MarketplaceItemForSale"===t?r="/marketplace/items-for-sale/share":"MarketplaceItemToBuy"===t&&(r="/marketplace/items-to-buy/share"),e.prev=2,e.next=5,Object(h.b)({method:"post",url:r,data:{shared:n},headers:{"x-token":s.token}});case 5:if(a=e.sent,o=a.data,201!==a.status){e.next=11;break}v.b.success("Shared successfully"),e.next=13;break;case 11:throw v.b.error((null===o||void 0===o?void 0:o.message)||"Something wrong"),new Error;case 13:e.next=18;break;case 15:e.prev=15,e.t0=e.catch(2),console.log(e.t0);case 18:case"end":return e.stop()}}),e,null,[[2,15]])})));return function(t,n){return e.apply(this,arguments)}}(),q=function(){var e=Object(l.a)(c.a.mark((function e(t){var n,r;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Object(h.b)({method:"delete",url:"/posts",data:{id:t},headers:{"x-token":s.token}});case 3:n=e.sent,n.data,400!==n.status?(r=m.timelineData.filter((function(e){return e.id!==t})),b(S(r)),v.b.success("Deleted successfully!")):v.b.error("This post deleting does not allowed!"),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),console.log(e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t){return e.apply(this,arguments)}}(),R=function(){var e=Object(l.a)(c.a.mark((function e(t){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:console.log(t);case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();Object(r.useEffect)((function(){x(s.token),window.addEventListener("scroll",_.throttle((function(){var e=window.pageYOffset;y(e>100)}),250))}),[]);var V=s.user;return N(a.a.Fragment,null,N(u.a,null),N("div",{className:f.a.timeline},N("div",{className:f.a.feed_container},N("div",{className:f.a.createPostDiv},N(I.a,{size:50,url:null===V||void 0===V||null===(t=V.profilePhoto)||void 0===t?void 0:t.src,username:null===V||void 0===V?void 0:V.username}),N("input",{className:f.a.createPostInput,placeholder:"What's on your mind?",onClick:L})),N(E.a,{loading:m.loading},N(p.a,{data:m.timelineData,onUpdateTimeline:function(e){m.timelineData.map((function(t){if(t.id==e.id){var n=F({account:s.user},e.comments[0]);return"undefined"==typeof t.comments?t.comments=[n]:t.comments.push(n),t.commentsCount+=e.commentsCount,t}})),b(S(m.timelineData))},processedVideoUpdate:R,onRatePost:A,likeAction:M,shareAction:W,deleteAction:q,auth:s})))),N(C.a,{title:"Create Post",showModal:O,onClose:function(){return w(!1)}},N(d.a,{loading:m.postingLoading,onPosting:T,modalPopup:L})))})),M=a.a.createElement;function W(){return M("div",null,M(x,null,M(L,null)))}},PObt:function(e,t){throw new Error('Module build failed (from ./node_modules/next/dist/build/webpack/loaders/next-babel-loader.js):\nSyntaxError: D:\\Freeskies-development-\\components\\timeline\\TimelinePosts.js: Unexpected token (233:22)\n\n\x1b[0m \x1b[90m 231 | \x1b[39m                muted\x1b[33m:\x1b[39m \x1b[36mtrue\x1b[39m\x1b[33m,\x1b[39m\x1b[0m\n\x1b[0m \x1b[90m 232 | \x1b[39m                controls\x1b[33m:\x1b[39m \x1b[36mtrue\x1b[39m\x1b[33m,\x1b[39m\x1b[0m\n\x1b[0m\x1b[31m\x1b[1m>\x1b[22m\x1b[39m\x1b[90m 233 | \x1b[39m                poster\x1b[33m=\x1b[39m\x1b[32m`https://www.freeskies.com/static/${video.thumbnail.src}`\x1b[39m\x1b[33m,\x1b[39m\x1b[0m\n\x1b[0m \x1b[90m     | \x1b[39m                      \x1b[31m\x1b[1m^\x1b[22m\x1b[39m\x1b[0m\n\x1b[0m \x1b[90m 234 | \x1b[39m                sources\x1b[33m:\x1b[39m [{\x1b[0m\n\x1b[0m \x1b[90m 235 | \x1b[39m                  src\x1b[33m:\x1b[39m \x1b[32m`https://www.freeskies.com/static/${video.src}`\x1b[39m\x1b[33m,\x1b[39m\x1b[0m\n\x1b[0m \x1b[90m 236 | \x1b[39m                  type\x1b[33m:\x1b[39m \x1b[32m"application/x-mpegURL"\x1b[39m\x1b[33m,\x1b[39m\x1b[0m\n    at Object._raise (D:\\Freeskies-development-\\node_modules\\@babel\\parser\\lib\\index.js:748:17)\n    at Object.raiseWithData (D:\\Freeskies-development-\\node_modules\\@babel\\parser\\lib\\index.js:741:17)\n    at Object.raise (D:\\Freeskies-development-\\node_modules\\@babel\\parser\\lib\\index.js:735:17)\n    at Object.unexpected (D:\\Freeskies-development-\\node_modules\\@babel\\parser\\lib\\index.js:9097:16)\n    at Object.checkExpressionErrors (D:\\Freeskies-development-\\node_modules\\@babel\\parser\\lib\\index.js:9185:12)\n    at Object.parseMaybeAssign (D:\\Freeskies-development-\\node_modules\\@babel\\parser\\lib\\index.js:9925:12)\n    at D:\\Freeskies-development-\\node_modules\\@babel\\parser\\lib\\index.js:9865:39\n    at Object.allowInAnd (D:\\Freeskies-development-\\node_modules\\@babel\\parser\\lib\\index.js:11521:12)\n    at Object.parseMaybeAssignAllowIn (D:\\Freeskies-development-\\node_modules\\@babel\\parser\\lib\\index.js:9865:17)\n    at Object.parseVar (D:\\Freeskies-development-\\node_modules\\@babel\\parser\\lib\\index.js:12316:70)')},QWJe:function(e,t,n){e.exports={activity_posting:"posting-post_activity_posting__1baua",actions_container:"posting-post_actions_container__3aGDl","button-container":"posting-post_button-container__1Q6oN","ant-btn-primary":"posting-post_ant-btn-primary__3UutL",file_place:"posting-post_file_place__2POpB"}},VIWY:function(e,t,n){"use strict";n.d(t,"a",(function(){return d}));var r=n("Ff2n"),a=n("q1tI"),o=n.n(a),s=n("9rZX"),i=n.n(s),c=n("4i/N"),l=n("QWJe"),u=n.n(l),m=(n("TSYQ"),o.a.createElement),p={content:{},overlay:{backgroundColor:"rgba(50, 50, 50, .8)"}};function d(e){var t=e.children,n=(e.narrow_container,e.title,e.show),a=e.handleHide;Object(r.a)(e,["children","narrow_container","title","show","handleHide"]);return console.log(n),m(i.a,{isOpen:n,style:p,shouldCloseOnOverlayClick:!0,onRequestClose:a},m("div",{className:u.a.header},m("button",{className:u.a.close,type:"button",onClick:a},m(c.a,null))),m("div",{className:u.a.content},t))}},mDtT:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/timeline",function(){return n("Dx8+")}])},qg42:function(e,t,n){e.exports={timeline:"timeline_timeline__mY-nJ",createPostInput:"timeline_createPostInput__Xrg8W",createPostDiv:"timeline_createPostDiv__1JJhj",mobile_profile_header:"timeline_mobile_profile_header__TFfnT"}}},[["mDtT",0,2,4,1,3,6,5,7,8]]]);