_N_E=(window.webpackJsonp_N_E=window.webpackJsonp_N_E||[]).push([[24],{"ajk/":function(e,t,a){(window.__NEXT_P=window.__NEXT_P||[]).push(["/profiles/[username]",function(){return a("oDGd")}])},h2kq:function(e,t,a){e.exports={header:"userprofile_header__38A0v",left:"userprofile_left__3nQMM",profile:"userprofile_profile__2kSqE",fullname:"userprofile_fullname__2Vq2v",avatar:"userprofile_avatar__37Gh1",user_content:"userprofile_user_content__2h01n",profile_content:"userprofile_profile_content__1XdVR",profile_tabs:"userprofile_profile_tabs__19hFH",mobile_profile_tabs:"userprofile_mobile_profile_tabs__1d_C0",tab:"userprofile_tab__J6gtj",activity_label:"userprofile_activity_label__1zzQM",container:"userprofile_container__2feiw",rating_text:"userprofile_rating_text__wowBd",profile_user_button:"userprofile_profile_user_button__3nfWF",follow_button:"userprofile_follow_button__1i2lr",profile_user_button_space:"userprofile_profile_user_button_space__1a2q6",friends_list:"userprofile_friends_list__EKdDD",friend:"userprofile_friend__x66py",friend_name:"userprofile_friend_name__2wZQc",sections_content:"userprofile_sections_content__8ishu"}},oDGd:function(e,t,a){"use strict";a.r(t),a.d(t,"default",(function(){return q}));var o=a("q1tI"),s=a.n(o),r=a("rePB"),n=a("TSYQ"),c=a.n(n),l=a("ZTPi"),i=a("tsqr"),u=a("GzdX"),d=a("2/Rp"),m=a("uoqP"),p=a("o3/p"),f=(a("Bfm4"),a("A9a1"),a("+eX/")),_=a("jL+W"),y=a("ffwR"),h=(a("4nr2"),a("rOC1"),a("VIWY"),a("wd/R"),a("B3wi")),b=a("+YTy"),v=a("nOHt"),g=s.a.createElement;function k(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,o)}return a}function D(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?k(Object(a),!0).forEach((function(t){Object(r.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):k(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}const w={loading:!1,user_accountData:[],activityData:[],friendsData:[],photosData:[],ratesData:[],marketSaleData:[],marketBuyData:[]};function A(e,{type:t,payload:a}){switch(t){case"userprofile/SET_LOADING":return D(D({},e),{},{loading:a});case"userprofile/SET_ACTIVITY_DATA":return D(D({},e),{},{activityData:a});case"userprofile/SET_USER_ACCOUNT_DATA":return D(D({},e),{},{user_accountData:a});case"userprofile/SET_FRIENDS_DATA":return D(D({},e),{},{friendsData:a});case"userprofile/SET_PHOTOS_DATA":return D(D({},e),{},{photosData:a});case"userprofile/SET_RATES_DATA":return D(D({},e),{},{ratesData:a});case"userprofile/SET_MARKETPLACE_SALE_DATA":return D(D({},e),{},{marketSaleData:a});case"userprofile/SET_MARKETPLACE_BUY_DATA":return D(D({},e),{},{marketBuyData:a});default:return e}}const O=Object(o.createContext)([{},()=>{}]),T=({children:e})=>{const t=Object(o.useReducer)(A,w);return g(O.Provider,{value:t},e)};var N=e=>({type:"userprofile/SET_USER_ACCOUNT_DATA",payload:e});function S(e){switch(e){case"userprofile":return"userprofile/SET_LOADING";default:return""}}var E=(e,t="userprofile")=>({type:S(t),payload:e});var P=e=>({type:"userprofile/SET_ACTIVITY_DATA",payload:e});var j=e=>({type:"userprofile/SET_FRIENDS_DATA",payload:e});var C=e=>({type:"userprofile/SET_PHOTOS_DATA",payload:e});var x=e=>({type:"userprofile/SET_RATES_DATA",payload:e});var R=e=>({type:"userprofile/SET_MARKETPLACE_SALE_DATA",payload:e});var I=e=>({type:"userprofile/SET_MARKETPLACE_BUY_DATA",payload:e}),F=a("PObt"),U=a("h2kq"),M=a.n(U),z=s.a.createElement;function L(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,o)}return a}function B(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?L(Object(a),!0).forEach((function(t){Object(r.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):L(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}const{TabPane:V}=l.a;var K=Object(_.a)((function({auth:e,authServices:t}){var a,r,n,_,g,k,D,w;const A=Object(v.useRouter)(),{username:T}=A.query,{0:S,1:U}=Object(o.useContext)(O);console.log(S),Object(o.useEffect)(()=>{L(),K(),Y(),q(),G(),W(),H()},[]);const L=async()=>{try{const a=await Object(m.b)({method:"post",url:"/accounts/get-account",data:{username:T},headers:{"x-token":e.token}}),{data:o,status:s}=a;200===s?U(N(o)):403===s?t.refreshToken():i.b.error((null===o||void 0===o?void 0:o.message)||"Something wrong")}catch(a){console.log(a)}},K=async()=>{try{const o=await Object(m.b)({method:"post",url:"/accounts/get-account-activity",data:{username:T},headers:{"x-token":e.token}}),{data:s,status:r}=o;if(200===r){var a=s.map(e=>e=X(e));U(P(a))}else 403===r?t.refreshToken():i.b.error((null===s||void 0===s?void 0:s.message)||"Something wrong")}catch(o){console.log(o)}},Y=async()=>{try{const a=await Object(m.b)({method:"post",url:"/accounts/get-account-friends",data:{username:T,offset:0,first:10},headers:{"x-token":e.token}}),{data:o,status:s}=a;200===s?U(j(o)):403===s?t.refreshToken():i.b.error((null===o||void 0===o?void 0:o.message)||"Something wrong")}catch(a){console.log(a)}},q=async()=>{try{const a=await Object(m.b)({method:"post",url:"/accounts/get-account-photos",data:{username:T,offset:0,first:10},headers:{"x-token":e.token}}),{data:o,status:s}=a;200===s?U(C(o)):403===s?t.refreshToken():i.b.error((null===o||void 0===o?void 0:o.message)||"Something wrong")}catch(a){console.log(a)}},H=async()=>{try{const a=await Object(m.b)({method:"post",url:"/accounts/get-account-rated",data:{username:T,offset:0,first:10},headers:{"x-token":e.token}}),{data:o,status:s}=a;200===s?U(x(o)):403===s?t.refreshToken():i.b.error((null===o||void 0===o?void 0:o.message)||"Something wrong")}catch(a){console.log(a)}},G=async()=>{U(E(!0));try{const t=await Object(m.b)({method:"post",url:"/accounts/marketplace/get-account-items-for-sale",data:{account:T,offset:0,first:10},headers:{"x-token":e.token}}),{data:a,status:o}=t;200===o&&(U(R(a)),U(E(!1)))}catch(t){console.log(t)}},W=async()=>{try{const t=await Object(m.b)({method:"post",url:"/accounts/marketplace/get-account-items-to-buy",data:{account:T,offset:0,first:10},headers:{"x-token":e.token}}),{data:a,status:o}=t;200===o&&U(I(a))}catch(t){console.log(t)}},X=e=>"Comment"===e.type?"Post"==e.commented.type?B(B({},e.commented),{},{comments:[B({},e)]}):"Comment"==e.commented.type?B(B({},e.commented.commented),{},{comments:[B(B({},e.commented),{},{comments:[e]})]}):"Share"==e.commented.type?B(B({},e.commented.shared),{},{comments:[B({},e)]}):B(B({},e.commented),{},{comments:[B({},e)]}):"Post"===e.type?e:"Share"===e.type?B(B({},e.shared),{},{shares:[B({},e)]}):e,Q=async(t,a,o)=>{try{let s="";"Photo"===t?s="/photos/rate":"VideoClip"===t?s="/video-clips/rate":"Item"===t?s="/items/rate":"Post"===t?s="/posts/rate":"Comment"===t?s="/comments/rate":"MarketplaceItemForSale"===t?s="/marketplace/items-for-sale/rate":"MarketplaceItemToBuy"===t&&(s="/marketplace/items-to-buy/rate");const r=await Object(m.b)({method:"post",url:s,data:{id:a,rating:o},headers:{"x-token":e.token}}),{data:n,status:c}=r;return 201===c?(S.activityData.map(e=>{if(e.id===a&&e.type===t)return e.rating=o,e}),U(setActivity(S.activityData))):i.b.error((null===n||void 0===n?void 0:n.message)||"Something wrong"),await r}catch(s){console.log(s)}},J=async(t,a,o)=>{var s="";"Photo"===t?s="/photos/react":"VideoClip"===t?s="/video-clips/react":"Item"===t?s="/items/react":"Post"===t?s="/posts/react":"Comment"===t?s="/comments/react":"Share"===t?s="/shares/react":"MarketplaceItemForSale"===t?s="/marketplace/items-for-sale/react":"MarketplaceItemToBuy"===t&&(s="/marketplace/items-to-buy/react");try{const t=await Object(m.b)({method:"post",url:s,data:{reacted:a,reaction:o},headers:{"x-token":e.token}}),{data:r,status:n}=t;if(201!==n)throw i.b.error((null===r||void 0===r?void 0:r.message)||"Something wrong"),new Error;i.b.success("Added successfully")}catch(r){console.log(r)}},Z=async(t,a)=>{var o="";"Photo"===t?o="/photos/share":"VideoClip"===t?o="/video-clips/share":"Item"===t?o="/items/share":"Post"===t?o="/posts/share":"Comment"===t?o="/comments/share":"Share"===t?o="/posts/share":"MarketplaceItemForSale"===t?o="/marketplace/items-for-sale/share":"MarketplaceItemToBuy"===t&&(o="/marketplace/items-to-buy/share");try{const t=await Object(m.b)({method:"post",url:o,data:{shared:a},headers:{"x-token":e.token}}),{data:s,status:r}=t;if(201!==r)throw i.b.error((null===s||void 0===s?void 0:s.message)||"Something wrong"),new Error;i.b.success("Shared successfully")}catch(s){console.log(s)}},$=async t=>{if(""!==t)try{const a=await Object(m.b)({method:"post",url:"/accounts/friendship",data:{username:t},headers:{"x-token":e.token}}),{data:o,status:s}=a;return 204===s?i.b.success("Added Friend successfully"):i.b.error((null===o||void 0===o?void 0:o.message)||"Something wrong"),await a}catch(a){console.log(a)}},ee=t=>{console.log(e),S.activityData.map(a=>{if(a.id==t.id){let o=B({account:e.user},t.comments[0]);return"undefined"==typeof a.comments?a.comments=[o]:a.comments.push(o),a.commentsCount+=t.commentsCount,a}}),U(P(S.activityData))};return z(s.a.Fragment,null,z(h.a,null),z("div",{className:M.a.container},z("div",{className:M.a.left},0!==S.user_accountData.length?z("div",{className:M.a.profile},z("div",{className:M.a.avatar},z("div",{className:M.a.avatar_image},z(y.a,{size:140,url:"".concat(null===(a=S.user_accountData)||void 0===a||null===(r=a.profilePhoto)||void 0===r?void 0:r.src),text:null===(n=S.user_accountData)||void 0===n?void 0:n.username,username:null===(_=S.user_accountData)||void 0===_?void 0:_.username}))),z("div",{className:M.a.user_content},z("div",{className:M.a.user_info},z("div",{className:M.a.heade_section},z("div",{className:M.a.left_side},z("p",{className:M.a.fullname,style:{cursor:"pointer"}},z("span",null,"".concat(null===(g=S.user_accountData)||void 0===g?void 0:g.firstName," ").concat(null===(k=S.user_accountData)||void 0===k?void 0:k.lastName)))),z("div",{className:M.a.right_side},z("p",{className:M.a.rating},z(u.a,{defaultValue:null===(D=S.user_accountData)||void 0===D?void 0:D.rating,style:{color:"#fadb14",fontSize:"30px"},onHoverChange:t=>{"undefined"!==typeof t&&(async t=>{if(""!==T)try{U(E(!0));const a=await Object(m.b)({method:"post",url:"/accounts/rate",data:{username:T,rating:t},headers:{"x-token":e.token}}),{data:o,status:s}=a;201===s?L():i.b.error((null===o||void 0===o?void 0:o.message)||"Something wrong"),U(E(!1)),await a}catch(a){U(E(!1))}})(t)}}),z("span",{className:M.a.rating_text},null===(w=S.user_accountData)||void 0===w?void 0:w.rating))))))):z("div",{className:"border border-gray-300 shadow rounded-md p-4 max-w-sm w-full mx-auto"},z("div",{className:"animate-pulse flex space-x-4"},z("div",{className:"rounded-full bg-gray-400 h-12 w-12"}),z("div",{className:"flex-1 space-y-4 py-1"},z("div",{className:"h-4 bg-gray-400 rounded w-3/4"}),z("div",{className:"space-y-2"},z("div",{className:"h-4 bg-gray-400 rounded"}),z("div",{className:"h-4 bg-gray-400 rounded w-5/6"}))))),z("div",{className:M.a.profile_user_button},S.user_accountData.isFriend?z(d.a,{type:"primary",className:M.a.follow_button,className:M.a.follow_button,onClick:()=>(async t=>{if(""!==t)try{const a=await Object(m.b)({method:"delete",url:"/accounts/friendship",data:{username:t},headers:{"x-token":e.token}}),{data:o,status:s}=a;return 201===s?i.b.success("Deleted Friend successfully"):i.b.error((null===o||void 0===o?void 0:o.message)||"Something wrong"),await a}catch(a){console.log(a)}})(S.user_accountData.username)},"UNFRIEND"):z(d.a,{type:"primary",className:M.a.follow_button,onClick:()=>$(S.user_accountData.username)},"ADD FRIEND"),z("div",{className:M.a.profile_user_button_space}),S.user_accountData.isFollow?z(d.a,{type:"primary",className:M.a.follow_button,onClick:()=>(async t=>{if(""!==t)try{const a=await Object(m.b)({method:"delete",url:"/accounts/followship",data:{username:t},headers:{"x-token":e.token}}),{data:o,status:s}=a;return void i.b.success("Unfollowed successfully!")}catch(a){U(E(!1))}})(S.user_accountData.username)},"UNFOLLOW"):z(d.a,{type:"primary",className:M.a.follow_button,onClick:()=>(async t=>{if(""!==t)try{U(E(!0));const a=await Object(m.b)({method:"post",url:"/accounts/followship",data:{username:t},headers:{"x-token":e.token}}),{data:o,status:s}=a;return void i.b.success("Followed successfully!")}catch(a){U(E(!1))}})(S.user_accountData.username)},"FOLLOW")),z("div",{className:M.a.profile_content},z("div",{className:M.a.profile_tabs},z(l.a,{defaultActiveKey:"1"},z(V,{tab:z("span",{className:M.a.tab},"ACTIVITY"),key:"1"},z("h2",{className:M.a.activity_label},"ACTIVITY"),z(F.a,{data:S.activityData,onUpdateTimeline:ee,onRatePost:Q,likeAction:J,shareAction:Z,deleteAction:()=>{},disableDelete:!0,auth:e})),z(V,{tab:z("span",{className:M.a.tab},"FRIENDS"),key:"2"},z("div",{className:c()(M.a.friends_list,M.a.sections_content)},null===S||void 0===S?void 0:S.friendsData.map((e,t)=>z("div",{className:M.a.friend,key:t},z(y.a,{size:80,url:null===e||void 0===e?void 0:e.profilePhoto,text:null===e||void 0===e?void 0:e.username,style:{marginRight:0},username:null===e||void 0===e?void 0:e.username}),z("div",{className:M.a.friend_name},z("p",{style:{textAlign:"left",fontSize:20}},e.firstName," ",e.lastName),z(u.a,{defaultValue:e.rating,style:{color:"#fadb14",fontSize:"15px"}}),z(d.a,{type:"default",shape:"round",size:"small",style:{marginLeft:5},onClick:()=>$(e.username)},"Friend")))))),z(V,{tab:z("span",{className:M.a.tab},"PHOTOS"),key:"3"},z("div",{className:M.a.photoSection},z(p.a,{user:S.photosData,onRatePost:Q,otherUser:!0,likeAction:J,shareAction:Z,auth:e,onUpdateTimeline:ee}))),z(V,{tab:z("span",{className:M.a.tab},"RATED"),key:"4"},z(f.a,{user:{recentRated:S.ratesData},onRatePost:Q,otherUser:!0})),z(V,{tab:z("span",{className:M.a.tab},"MARKETPLACE"),key:"5"},z(l.a,{defaultActiveKey:"1"},z(V,{tab:z("span",{style:{fontSize:20}},"Sale"),key:"1"},z(b.a,{data:S.marketSaleData,otherUser:!0,getDetailMarketItem:()=>console.log("market")})),z(V,{tab:z("span",{style:{fontSize:20}},"Buy"),key:"2"},z(b.a,{data:S.marketBuyData,otherUser:!0,getDetailMarketItem:()=>console.log("market")})))))),z("div",{className:M.a.mobile_profile_tabs},z("h2",{className:M.a.activity_label},"ACTIVITY"),z(F.a,{data:S.activityData,onUpdateTimeline:ee,onRatePost:Q,likeAction:J,shareAction:Z,deleteAction:()=>{},disableDelete:!0,auth:e}),z("h2",{className:M.a.activity_label},"FRIENDS"),z("div",{className:c()(M.a.friends_list,M.a.sections_content)},null===S||void 0===S?void 0:S.friendsData.map((e,t)=>z("div",{className:M.a.friend,key:t},z(y.a,{size:80,url:null===e||void 0===e?void 0:e.profilePhoto,text:null===e||void 0===e?void 0:e.username,username:null===e||void 0===e?void 0:e.username,style:{marginRight:0}}),z("div",{className:M.a.friend_name},z("p",{style:{textAlign:"left",fontSize:20}},e.firstName," ",e.lastName),z(u.a,{defaultValue:e.rating,style:{color:"#fadb14",fontSize:"15px"}}),z(d.a,{type:"default",shape:"round",size:"small",style:{marginLeft:5},onClick:()=>$(e.username)},"Friend"))))),z("h2",{className:M.a.activity_label},"MARKETPLACE"),z(l.a,{defaultActiveKey:"1"},z(V,{tab:z("span",{style:{fontSize:20}},"Sale"),key:"1"},z(b.a,{data:S.marketSaleData,otherUser:!0,getDetailMarketItem:()=>console.log("market")})),z(V,{tab:z("span",{style:{fontSize:20}},"Buy"),key:"2"},z(b.a,{data:S.marketBuyData,otherUser:!0,getDetailMarketItem:()=>console.log("market")}))),z("h2",{className:M.a.activity_label},"PHOTOS"),z(p.a,{user:S.photosData,onRatePost:Q,otherUser:!0,likeAction:J,shareAction:Z,auth:e,onUpdateTimeline:ee}),z("h2",{className:M.a.activity_label},"RATED"),z(f.a,{user:{recentRated:S.ratesData},onRatePost:Q,otherUser:!0}))))))})),Y=s.a.createElement;function q(){return Y("div",null,Y(T,null,Y(K,null)))}}},[["ajk/",0,2,5,10,1,3,4,6,7,8,9,11,12,13]]]);