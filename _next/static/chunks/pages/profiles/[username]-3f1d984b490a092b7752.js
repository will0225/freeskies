_N_E=(window.webpackJsonp_N_E=window.webpackJsonp_N_E||[]).push([[23],{"ajk/":function(e,a,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/profiles/[username]",function(){return t("oDGd")}])},h2kq:function(e,a,t){e.exports={header:"userprofile_header__38A0v",left:"userprofile_left__3nQMM",profile:"userprofile_profile__2kSqE",fullname:"userprofile_fullname__2Vq2v",avatar:"userprofile_avatar__37Gh1",user_content:"userprofile_user_content__2h01n",profile_content:"userprofile_profile_content__1XdVR",profile_tabs:"userprofile_profile_tabs__19hFH",mobile_profile_tabs:"userprofile_mobile_profile_tabs__1d_C0",tab:"userprofile_tab__J6gtj",activity_label:"userprofile_activity_label__1zzQM",container:"userprofile_container__2feiw",rating_text:"userprofile_rating_text__wowBd",profile_user_button:"userprofile_profile_user_button__3nfWF",follow_button:"userprofile_follow_button__1i2lr",profile_user_button_space:"userprofile_profile_user_button_space__1a2q6",friends_list:"userprofile_friends_list__EKdDD",friend:"userprofile_friend__x66py",friend_name:"userprofile_friend_name__2wZQc",sections_content:"userprofile_sections_content__8ishu"}},oDGd:function(e,a,t){"use strict";t.r(a),t.d(a,"default",(function(){return q}));var o=t("q1tI"),s=t.n(o),r=t("rePB"),n=t("TSYQ"),c=t.n(n),l=t("ZTPi"),i=t("tsqr"),u=t("GzdX"),d=t("2/Rp"),m=t("uoqP"),p=t("o3/p"),f=(t("Bfm4"),t("A9a1"),t("+eX/")),_=t("jL+W"),y=t("ffwR"),h=(t("4nr2"),t("rOC1"),t("VIWY"),t("wd/R"),t("B3wi")),v=t("+YTy"),b=t("nOHt"),g=s.a.createElement;function k(e,a){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);a&&(o=o.filter((function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable}))),t.push.apply(t,o)}return t}function D(e){for(var a=1;a<arguments.length;a++){var t=null!=arguments[a]?arguments[a]:{};a%2?k(Object(t),!0).forEach((function(a){Object(r.a)(e,a,t[a])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):k(Object(t)).forEach((function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(t,a))}))}return e}const w={loading:!1,user_accountData:[],activityData:[],friendsData:[],photosData:[],ratesData:[],marketSaleData:[],marketBuyData:[]};function O(e,{type:a,payload:t}){switch(a){case"userprofile/SET_LOADING":return D(D({},e),{},{loading:t});case"userprofile/SET_ACTIVITY_DATA":return D(D({},e),{},{activityData:t});case"userprofile/SET_USER_ACCOUNT_DATA":return D(D({},e),{},{user_accountData:t});case"userprofile/SET_FRIENDS_DATA":return D(D({},e),{},{friendsData:t});case"userprofile/SET_PHOTOS_DATA":return D(D({},e),{},{photosData:t});case"userprofile/SET_RATES_DATA":return D(D({},e),{},{ratesData:t});case"userprofile/SET_MARKETPLACE_SALE_DATA":return D(D({},e),{},{marketSaleData:t});case"userprofile/SET_MARKETPLACE_BUY_DATA":return D(D({},e),{},{marketBuyData:t});default:return e}}const S=Object(o.createContext)([{},()=>{}]),A=({children:e})=>{const a=Object(o.useReducer)(O,w);return g(S.Provider,{value:a},e)};var N=e=>({type:"userprofile/SET_USER_ACCOUNT_DATA",payload:e});function T(e){switch(e){case"userprofile":return"userprofile/SET_LOADING";default:return""}}var E=(e,a="userprofile")=>({type:T(a),payload:e});var P=e=>({type:"userprofile/SET_ACTIVITY_DATA",payload:e});var j=e=>({type:"userprofile/SET_FRIENDS_DATA",payload:e});var C=e=>({type:"userprofile/SET_PHOTOS_DATA",payload:e});var x=e=>({type:"userprofile/SET_RATES_DATA",payload:e});var R=e=>({type:"userprofile/SET_MARKETPLACE_SALE_DATA",payload:e});var I=e=>({type:"userprofile/SET_MARKETPLACE_BUY_DATA",payload:e}),F=t("PObt"),z=t("h2kq"),L=t.n(z),B=s.a.createElement;function M(e,a){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);a&&(o=o.filter((function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable}))),t.push.apply(t,o)}return t}function U(e){for(var a=1;a<arguments.length;a++){var t=null!=arguments[a]?arguments[a]:{};a%2?M(Object(t),!0).forEach((function(a){Object(r.a)(e,a,t[a])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):M(Object(t)).forEach((function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(t,a))}))}return e}const{TabPane:V}=l.a;var K=Object(_.a)((function({auth:e,authServices:a}){var t,r,n,_,g,k,D,w;const O=Object(b.useRouter)(),{username:A}=O.query,{0:T,1:z}=Object(o.useContext)(S);console.log(T),Object(o.useEffect)(()=>{M(),K(),Y(),q(),G(),W(),H()},[]);const M=async()=>{try{const t=await Object(m.a)({method:"post",url:"/accounts/get-account",data:{username:A},headers:{"x-token":e.token}}),{data:o,status:s}=t;200===s?z(N(o)):403===s?a.refreshToken():i.b.error((null===o||void 0===o?void 0:o.message)||"Something wrong")}catch(t){console.log(t)}},K=async()=>{try{const o=await Object(m.a)({method:"post",url:"/accounts/get-account-activity",data:{username:A},headers:{"x-token":e.token}}),{data:s,status:r}=o;if(200===r){var t=s.map(e=>e=X(e));z(P(t))}else 403===r?a.refreshToken():i.b.error((null===s||void 0===s?void 0:s.message)||"Something wrong")}catch(o){console.log(o)}},Y=async()=>{try{const t=await Object(m.a)({method:"post",url:"/accounts/get-account-friends",data:{username:A,offset:0,first:10},headers:{"x-token":e.token}}),{data:o,status:s}=t;200===s?z(j(o)):403===s?a.refreshToken():i.b.error((null===o||void 0===o?void 0:o.message)||"Something wrong")}catch(t){console.log(t)}},q=async()=>{try{const t=await Object(m.a)({method:"post",url:"/accounts/get-account-photos",data:{username:A,offset:0,first:10},headers:{"x-token":e.token}}),{data:o,status:s}=t;200===s?z(C(o)):403===s?a.refreshToken():i.b.error((null===o||void 0===o?void 0:o.message)||"Something wrong")}catch(t){console.log(t)}},H=async()=>{try{const t=await Object(m.a)({method:"post",url:"/accounts/get-account-rated",data:{username:A,offset:0,first:10},headers:{"x-token":e.token}}),{data:o,status:s}=t;200===s?z(x(o)):403===s?a.refreshToken():i.b.error((null===o||void 0===o?void 0:o.message)||"Something wrong")}catch(t){console.log(t)}},G=async()=>{z(E(!0));try{const a=await Object(m.a)({method:"post",url:"/accounts/marketplace/get-account-items-for-sale",data:{account:A,offset:0,first:10},headers:{"x-token":e.token}}),{data:t,status:o}=a;200===o&&(z(R(t)),z(E(!1)))}catch(a){console.log(a)}},W=async()=>{try{const a=await Object(m.a)({method:"post",url:"/accounts/marketplace/get-account-items-to-buy",data:{account:A,offset:0,first:10},headers:{"x-token":e.token}}),{data:t,status:o}=a;200===o&&z(I(t))}catch(a){console.log(a)}},X=e=>"Comment"===e.type?"Post"==e.commented.type?U(U({},e.commented),{},{comments:[U({},e)]}):"Comment"==e.commented.type?U(U({},e.commented.commented),{},{comments:[U(U({},e.commented),{},{comments:[e]})]}):"Share"==e.commented.type?U(U({},e.commented.shared),{},{comments:[U({},e)]}):U(U({},e.commented),{},{comments:[U({},e)]}):"Post"===e.type?e:"Share"===e.type?U(U({},e.shared),{},{shares:[U({},e)]}):e,Q=async(a,t,o)=>{try{let s="";"Photo"===a?s="/photos/rate":"VideoClip"===a?s="/video-clips/rate":"Item"===a?s="/items/rate":"Post"===a?s="/posts/rate":"Comment"===a?s="/comments/rate":"MarketplaceItemForSale"===a?s="/marketplace/items-for-sale/rate":"MarketplaceItemToBuy"===a&&(s="/marketplace/items-to-buy/rate");const r=await Object(m.a)({method:"post",url:s,data:{id:t,rating:o},headers:{"x-token":e.token}}),{data:n,status:c}=r;return 201===c?(T.activityData.map(e=>{if(e.id===t&&e.type===a)return e.rating=o,e}),z(setActivity(T.activityData))):i.b.error((null===n||void 0===n?void 0:n.message)||"Something wrong"),await r}catch(s){console.log(s)}},J=async(a,t,o)=>{var s="";"Photo"===a?s="/photos/react":"VideoClip"===a?s="/video-clips/react":"Item"===a?s="/items/react":"Post"===a?s="/posts/react":"Comment"===a?s="/comments/react":"Share"===a?s="/shares/react":"MarketplaceItemForSale"===a?s="/marketplace/items-for-sale/react":"MarketplaceItemToBuy"===a&&(s="/marketplace/items-to-buy/react");try{const a=await Object(m.a)({method:"post",url:s,data:{reacted:t,reaction:o},headers:{"x-token":e.token}}),{data:r,status:n}=a;if(201!==n)throw i.b.error((null===r||void 0===r?void 0:r.message)||"Something wrong"),new Error;i.b.success("Added successfully")}catch(r){console.log(r)}},Z=async(a,t)=>{var o="";"Photo"===a?o="/photos/share":"VideoClip"===a?o="/video-clips/share":"Item"===a?o="/items/share":"Post"===a?o="/posts/share":"Comment"===a?o="/comments/share":"Share"===a?o="/posts/share":"MarketplaceItemForSale"===a?o="/marketplace/items-for-sale/share":"MarketplaceItemToBuy"===a&&(o="/marketplace/items-to-buy/share");try{const a=await Object(m.a)({method:"post",url:o,data:{shared:t},headers:{"x-token":e.token}}),{data:s,status:r}=a;if(201!==r)throw i.b.error((null===s||void 0===s?void 0:s.message)||"Something wrong"),new Error;i.b.success("Shared successfully")}catch(s){console.log(s)}},$=async a=>{if(""!==a)try{const t=await Object(m.a)({method:"post",url:"/accounts/friendship",data:{username:a},headers:{"x-token":e.token}}),{data:o,status:s}=t;return 204===s?i.b.success("Added Friend successfully"):i.b.error((null===o||void 0===o?void 0:o.message)||"Something wrong"),await t}catch(t){console.log(t)}},ee=a=>{console.log(e),T.activityData.map(t=>{if(t.id==a.id){let o=U({account:e.user},a.comments[0]);return"undefined"==typeof t.comments?t.comments=[o]:t.comments.push(o),t.commentsCount+=a.commentsCount,t}}),z(P(T.activityData))};return B(s.a.Fragment,null,B(h.a,null),B("div",{className:L.a.container},B("div",{className:L.a.left},0!==T.user_accountData.length?B("div",{className:L.a.profile},B("div",{className:L.a.avatar},B("div",{className:L.a.avatar_image},B(y.a,{size:140,url:"".concat(null===(t=T.user_accountData)||void 0===t||null===(r=t.profilePhoto)||void 0===r?void 0:r.src),text:null===(n=T.user_accountData)||void 0===n?void 0:n.username,username:null===(_=T.user_accountData)||void 0===_?void 0:_.username}))),B("div",{className:L.a.user_content},B("div",{className:L.a.user_info},B("div",{className:L.a.heade_section},B("div",{className:L.a.left_side},B("p",{className:L.a.fullname,style:{cursor:"pointer"}},B("span",null,"".concat(null===(g=T.user_accountData)||void 0===g?void 0:g.firstName," ").concat(null===(k=T.user_accountData)||void 0===k?void 0:k.lastName)))),B("div",{className:L.a.right_side},B("p",{className:L.a.rating},B(u.a,{defaultValue:null===(D=T.user_accountData)||void 0===D?void 0:D.rating,style:{color:"#fadb14",fontSize:"30px"},onHoverChange:a=>{"undefined"!==typeof a&&(async a=>{if(""!==A)try{z(E(!0));const t=await Object(m.a)({method:"post",url:"/accounts/rate",data:{username:A,rating:a},headers:{"x-token":e.token}}),{data:o,status:s}=t;201===s?M():i.b.error((null===o||void 0===o?void 0:o.message)||"Something wrong"),z(E(!1)),await t}catch(t){z(E(!1))}})(a)}}),B("span",{className:L.a.rating_text},null===(w=T.user_accountData)||void 0===w?void 0:w.rating))))))):B("div",{className:"border border-gray-300 shadow rounded-md p-4 max-w-sm w-full mx-auto"},B("div",{className:"animate-pulse flex space-x-4"},B("div",{className:"rounded-full bg-gray-400 h-12 w-12"}),B("div",{className:"flex-1 space-y-4 py-1"},B("div",{className:"h-4 bg-gray-400 rounded w-3/4"}),B("div",{className:"space-y-2"},B("div",{className:"h-4 bg-gray-400 rounded"}),B("div",{className:"h-4 bg-gray-400 rounded w-5/6"}))))),B("div",{className:L.a.profile_user_button},T.user_accountData.isFriend?B(d.a,{type:"primary",className:L.a.follow_button,className:L.a.follow_button,onClick:()=>(async a=>{if(""!==a)try{const t=await Object(m.a)({method:"delete",url:"/accounts/friendship",data:{username:a},headers:{"x-token":e.token}}),{data:o,status:s}=t;return 201===s?i.b.success("Deleted Friend successfully"):i.b.error((null===o||void 0===o?void 0:o.message)||"Something wrong"),await t}catch(t){console.log(t)}})(T.user_accountData.username)},"UNFRIEND"):B(d.a,{type:"primary",className:L.a.follow_button,onClick:()=>$(T.user_accountData.username)},"ADD FRIEND"),B("div",{className:L.a.profile_user_button_space}),T.user_accountData.isFollow?B(d.a,{type:"primary",className:L.a.follow_button,onClick:()=>(async a=>{if(""!==a)try{const t=await Object(m.a)({method:"delete",url:"/accounts/followship",data:{username:a},headers:{"x-token":e.token}}),{data:o,status:s}=t;return void i.b.success("Unfollowed successfully!")}catch(t){z(E(!1))}})(T.user_accountData.username)},"UNFOLLOW"):B(d.a,{type:"primary",className:L.a.follow_button,onClick:()=>(async a=>{if(""!==a)try{z(E(!0));const t=await Object(m.a)({method:"post",url:"/accounts/followship",data:{username:a},headers:{"x-token":e.token}}),{data:o,status:s}=t;return void i.b.success("Followed successfully!")}catch(t){z(E(!1))}})(T.user_accountData.username)},"FOLLOW")),B("div",{className:L.a.profile_content},B("div",{className:L.a.profile_tabs},B(l.a,{defaultActiveKey:"1"},B(V,{tab:B("span",{className:L.a.tab},"ACTIVITY"),key:"1"},B("h2",{className:L.a.activity_label},"ACTIVITY"),B(F.a,{data:T.activityData,onUpdateTimeline:ee,onRatePost:Q,likeAction:J,shareAction:Z,deleteAction:()=>{},disableDelete:!0})),B(V,{tab:B("span",{className:L.a.tab},"FRIENDS"),key:"2"},B("div",{className:c()(L.a.friends_list,L.a.sections_content)},null===T||void 0===T?void 0:T.friendsData.map((e,a)=>B("div",{className:L.a.friend,key:a},B(y.a,{size:80,url:null===e||void 0===e?void 0:e.profilePhoto,text:null===e||void 0===e?void 0:e.username,style:{marginRight:0},username:null===e||void 0===e?void 0:e.username}),B("div",{className:L.a.friend_name},B("p",{style:{textAlign:"left",fontSize:20}},e.firstName," ",e.lastName),B(u.a,{defaultValue:e.rating,style:{color:"#fadb14",fontSize:"15px"}}),B(d.a,{type:"default",shape:"round",size:"small",style:{marginLeft:5},onClick:()=>$(e.username)},"Friend")))))),B(V,{tab:B("span",{className:L.a.tab},"PHOTOS"),key:"3"},B("div",{className:L.a.photoSection},B(p.a,{user:T.photosData,onRatePost:Q,otherUser:!0}))),B(V,{tab:B("span",{className:L.a.tab},"RATED"),key:"4"},B(f.a,{user:{recentRated:T.ratesData},onRatePost:Q,otherUser:!0})),B(V,{tab:B("span",{className:L.a.tab},"MARKETPLACE"),key:"5"},B(l.a,{defaultActiveKey:"1"},B(V,{tab:B("span",{style:{fontSize:20}},"Sale"),key:"1"},B(v.a,{data:T.marketSaleData})),B(V,{tab:B("span",{style:{fontSize:20}},"Buy"),key:"2"},B(v.a,{data:T.marketBuyData})))))),B("div",{className:L.a.mobile_profile_tabs},B("h2",{className:L.a.activity_label},"ACTIVITY"),B(F.a,{data:T.activityData,onUpdateTimeline:ee,onRatePost:Q,likeAction:J,shareAction:Z,deleteAction:()=>{},disableDelete:!0}),B("h2",{className:L.a.activity_label},"FRIENDS"),B("div",{className:c()(L.a.friends_list,L.a.sections_content)},null===T||void 0===T?void 0:T.friendsData.map((e,a)=>B("div",{className:L.a.friend,key:a},B(y.a,{size:80,url:null===e||void 0===e?void 0:e.profilePhoto,text:null===e||void 0===e?void 0:e.username,username:null===e||void 0===e?void 0:e.username,style:{marginRight:0}}),B("div",{className:L.a.friend_name},B("p",{style:{textAlign:"left",fontSize:20}},e.firstName," ",e.lastName),B(u.a,{defaultValue:e.rating,style:{color:"#fadb14",fontSize:"15px"}}),B(d.a,{type:"default",shape:"round",size:"small",style:{marginLeft:5},onClick:()=>$(e.username)},"Friend"))))),B("h2",{className:L.a.activity_label},"MARKETPLACE"),B(l.a,{defaultActiveKey:"1"},B(V,{tab:B("span",{style:{fontSize:20}},"Sale"),key:"1"},B(v.a,{data:T.marketSaleData})),B(V,{tab:B("span",{style:{fontSize:20}},"Buy"),key:"2"},B(v.a,{data:T.marketBuyData}))),B("h2",{className:L.a.activity_label},"PHOTOS"),B(p.a,{user:T.photosData,onRatePost:Q,otherUser:!0}),B("h2",{className:L.a.activity_label},"RATES"),B(f.a,{user:{recentRated:T.ratesData},onRatePost:Q,otherUser:!0}))))))})),Y=s.a.createElement;function q(){return Y("div",null,Y(A,null,Y(K,null)))}}},[["ajk/",0,2,5,9,1,3,4,6,7,8,10,11,12]]]);