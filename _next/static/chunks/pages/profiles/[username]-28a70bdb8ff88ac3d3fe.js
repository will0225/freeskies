_N_E=(window.webpackJsonp_N_E=window.webpackJsonp_N_E||[]).push([[25],{"ajk/":function(e,t,a){(window.__NEXT_P=window.__NEXT_P||[]).push(["/profiles/[username]",function(){return a("oDGd")}])},h2kq:function(e,t,a){e.exports={header:"userprofile_header__38A0v",left:"userprofile_left__3nQMM",profile:"userprofile_profile__2kSqE",fullname:"userprofile_fullname__2Vq2v",avatar:"userprofile_avatar__37Gh1",user_content:"userprofile_user_content__2h01n",profile_content:"userprofile_profile_content__1XdVR",profile_tabs:"userprofile_profile_tabs__19hFH",mobile_profile_tabs:"userprofile_mobile_profile_tabs__1d_C0",tab:"userprofile_tab__J6gtj",activity_label:"userprofile_activity_label__1zzQM",container:"userprofile_container__2feiw",rating_text:"userprofile_rating_text__wowBd",profile_user_button:"userprofile_profile_user_button__3nfWF",follow_button:"userprofile_follow_button__1i2lr",profile_user_button_space:"userprofile_profile_user_button_space__1a2q6",friends_list:"userprofile_friends_list__EKdDD",friend:"userprofile_friend__x66py",friend_name:"userprofile_friend_name__2wZQc",sections_content:"userprofile_sections_content__8ishu"}},oDGd:function(e,t,a){"use strict";a.r(t),a.d(t,"default",(function(){return W}));var o=a("q1tI"),s=a.n(o),r=a("rePB"),n=a("TSYQ"),c=a.n(n),i=a("ZTPi"),l=a("tsqr"),u=a("GzdX"),d=a("2/Rp"),m=a("uoqP"),p=a("o3/p"),f=(a("Bfm4"),a("A9a1"),a("+eX/")),_=a("jL+W"),y=a("ffwR"),h=(a("4nr2"),a("rOC1")),b=(a("VIWY"),a("wd/R"),a("B3wi")),v=a("+YTy"),g=a("nOHt"),k=s.a.createElement;function D(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,o)}return a}function w(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?D(Object(a),!0).forEach((function(t){Object(r.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):D(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}const A={loading:!1,user_accountData:[],activityData:[],friendsData:[],photosData:[],ratesData:[],marketSaleData:[],marketBuyData:[]};function O(e,{type:t,payload:a}){switch(t){case"userprofile/SET_LOADING":return w(w({},e),{},{loading:a});case"userprofile/SET_ACTIVITY_DATA":return w(w({},e),{},{activityData:a});case"userprofile/SET_USER_ACCOUNT_DATA":return w(w({},e),{},{user_accountData:a});case"userprofile/SET_FRIENDS_DATA":return w(w({},e),{},{friendsData:a});case"userprofile/SET_PHOTOS_DATA":return w(w({},e),{},{photosData:a});case"userprofile/SET_RATES_DATA":return w(w({},e),{},{ratesData:a});case"userprofile/SET_MARKETPLACE_SALE_DATA":return w(w({},e),{},{marketSaleData:a});case"userprofile/SET_MARKETPLACE_BUY_DATA":return w(w({},e),{},{marketBuyData:a});default:return e}}const S=Object(o.createContext)([{},()=>{}]),T=({children:e})=>{const t=Object(o.useReducer)(O,A);return k(S.Provider,{value:t},e)};var N=e=>({type:"userprofile/SET_USER_ACCOUNT_DATA",payload:e});function E(e){switch(e){case"userprofile":return"userprofile/SET_LOADING";default:return""}}var P=(e,t="userprofile")=>({type:E(t),payload:e});var j=e=>({type:"userprofile/SET_ACTIVITY_DATA",payload:e});var C=e=>({type:"userprofile/SET_FRIENDS_DATA",payload:e});var R=e=>({type:"userprofile/SET_PHOTOS_DATA",payload:e});var x=e=>({type:"userprofile/SET_RATES_DATA",payload:e});var I=e=>({type:"userprofile/SET_MARKETPLACE_SALE_DATA",payload:e});var U=e=>({type:"userprofile/SET_MARKETPLACE_BUY_DATA",payload:e}),F=a("PObt"),M=a("h2kq"),L=a.n(M),z=a("FVaq"),B=(a("goV6"),a("l3PL"),a("T27O")),V=s.a.createElement;function q(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,o)}return a}function K(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?q(Object(a),!0).forEach((function(t){Object(r.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):q(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}const{TabPane:Y}=i.a;var H=Object(_.a)((function({auth:e,authServices:t}){var a,r,n,_,k,D,w,A;const O=Object(g.useRouter)(),{username:T}=O.query,{0:E,1:M}=Object(o.useContext)(S),{0:q,1:H}=Object(o.useState)(!1),{0:G,1:W}=Object(o.useState)(null),{0:X,1:Q}=Object(o.useState)("MarketplaceItemForSale");Object(o.useEffect)(()=>{J(),Z(),$(),ee(),ae(),oe(),te()},[]);const J=async()=>{try{const a=await Object(m.b)({method:"post",url:"/accounts/get-account",data:{username:T},headers:{"x-token":e.token}}),{data:o,status:s}=a;200===s?M(N(o)):403===s?t.refreshToken():l.b.error((null===o||void 0===o?void 0:o.message)||"Something wrong")}catch(a){console.log(a)}},Z=async()=>{try{const o=await Object(m.b)({method:"post",url:"/accounts/get-account-activity",data:{username:T},headers:{"x-token":e.token}}),{data:s,status:r}=o;if(200===r){var a=s.map(e=>e=se(e));M(j(a))}else 403===r?t.refreshToken():l.b.error((null===s||void 0===s?void 0:s.message)||"Something wrong")}catch(o){console.log(o)}},$=async()=>{try{const a=await Object(m.b)({method:"post",url:"/accounts/get-account-friends",data:{username:T,offset:0,first:10},headers:{"x-token":e.token}}),{data:o,status:s}=a;200===s?M(C(o)):403===s?t.refreshToken():l.b.error((null===o||void 0===o?void 0:o.message)||"Something wrong")}catch(a){console.log(a)}},ee=async()=>{try{const a=await Object(m.b)({method:"post",url:"/accounts/get-account-photos",data:{username:T,offset:0,first:10},headers:{"x-token":e.token}}),{data:o,status:s}=a;200===s?M(R(o)):403===s?t.refreshToken():l.b.error((null===o||void 0===o?void 0:o.message)||"Something wrong")}catch(a){console.log(a)}},te=async()=>{try{const a=await Object(m.b)({method:"post",url:"/accounts/get-account-rated",data:{username:T,offset:0,first:10},headers:{"x-token":e.token}}),{data:o,status:s}=a;200===s?M(x(o)):403===s?t.refreshToken():l.b.error((null===o||void 0===o?void 0:o.message)||"Something wrong")}catch(a){console.log(a)}},ae=async()=>{M(P(!0));try{const t=await Object(m.b)({method:"post",url:"/accounts/marketplace/get-account-items-for-sale",data:{account:T,offset:0,first:10},headers:{"x-token":e.token}}),{data:a,status:o}=t;200===o&&(M(I(a)),M(P(!1)))}catch(t){console.log(t)}},oe=async()=>{try{const t=await Object(m.b)({method:"post",url:"/accounts/marketplace/get-account-items-to-buy",data:{account:T,offset:0,first:10},headers:{"x-token":e.token}}),{data:a,status:o}=t;200===o&&M(U(a))}catch(t){console.log(t)}},se=e=>"Comment"===e.type?"Post"==e.commented.type?K(K({},e.commented),{},{comments:[K({},e)]}):"Comment"==e.commented.type?K(K({},e.commented.commented),{},{comments:[K(K({},e.commented),{},{comments:[e]})]}):"Share"==e.commented.type?K(K({},e.commented.shared),{},{comments:[K({},e)]}):K(K({},e.commented),{},{comments:[K({},e)]}):"Post"===e.type?e:"Share"===e.type?K(K({},e.shared),{},{shares:[K({},e)]}):e,re=async(t,a,o)=>{try{let s="";"Photo"===t?s="/photos/rate":"VideoClip"===t?s="/video-clips/rate":"Item"===t?s="/items/rate":"Post"===t?s="/posts/rate":"Comment"===t?s="/comments/rate":"MarketplaceItemForSale"===t?s="/marketplace/items-for-sale/rate":"MarketplaceItemToBuy"===t&&(s="/marketplace/items-to-buy/rate");const r=await Object(m.b)({method:"post",url:s,data:{id:a,rating:o},headers:{"x-token":e.token}}),{data:n,status:c}=r;return 201===c?(E.activityData.map(e=>{if(e.id===a&&e.type===t)return e.rating=o,e}),M(setActivity(E.activityData))):l.b.error((null===n||void 0===n?void 0:n.message)||"Something wrong"),await r}catch(s){console.log(s)}},ne=async(t,a,o)=>{var s="";"Photo"===t?s="/photos/react":"VideoClip"===t?s="/video-clips/react":"Item"===t?s="/items/react":"Post"===t?s="/posts/react":"Comment"===t?s="/comments/react":"Share"===t?s="/shares/react":"MarketplaceItemForSale"===t?s="/marketplace/items-for-sale/react":"MarketplaceItemToBuy"===t&&(s="/marketplace/items-to-buy/react");try{const t=await Object(m.b)({method:"post",url:s,data:{reacted:a,reaction:o},headers:{"x-token":e.token}}),{data:r,status:n}=t;if(201!==n)throw l.b.error((null===r||void 0===r?void 0:r.message)||"Something wrong"),new Error;l.b.success("Added successfully")}catch(r){console.log(r)}},ce=async(t,a)=>{var o="";"Photo"===t?o="/photos/share":"VideoClip"===t?o="/video-clips/share":"Item"===t?o="/items/share":"Post"===t?o="/posts/share":"Comment"===t?o="/comments/share":"Share"===t?o="/posts/share":"MarketplaceItemForSale"===t?o="/marketplace/items-for-sale/share":"MarketplaceItemToBuy"===t&&(o="/marketplace/items-to-buy/share");try{const t=await Object(m.b)({method:"post",url:o,data:{shared:a},headers:{"x-token":e.token}}),{data:s,status:r}=t;if(201!==r)throw l.b.error((null===s||void 0===s?void 0:s.message)||"Something wrong"),new Error;l.b.success("Shared successfully")}catch(s){console.log(s)}},ie=async t=>{if(""!==t)try{const a=await Object(m.b)({method:"post",url:"/accounts/friendship",data:{username:t},headers:{"x-token":e.token}}),{data:o,status:s}=a;return 204===s?l.b.success("Added Friend successfully"):l.b.error((null===o||void 0===o?void 0:o.message)||"Something wrong"),await a}catch(a){console.log(a)}},le=t=>{console.log(e),E.activityData.map(a=>{if(a.id==t.id){let o=K({account:e.user},t.comments[0]);return"undefined"==typeof a.comments?a.comments=[o]:a.comments.push(o),a.commentsCount+=t.commentsCount,a}}),M(j(E.activityData))},ue=async(t,a)=>{H(!0),a||Q("MarketplaceItemToBuy");try{M(P(!0));const o=await Object(m.b)({method:"post",url:a?"/marketplace/items-for-sale/get":"/marketplace/items-to-buy/get",data:{id:t},headers:{"x-token":e.token}}),{data:s,status:r}=o;return 200===r?W(s):l.b.error((null===s||void 0===s?void 0:s.message)||"Something wrong"),M(P(!1)),await o}catch(o){M(P(!1))}},de=async()=>{console.log("Update")};return V(s.a.Fragment,null,V(b.a,null),V("div",{className:L.a.container},V("div",{className:L.a.left},0!==E.user_accountData.length?V("div",{className:L.a.profile},V("div",{className:L.a.avatar},V("div",{className:L.a.avatar_image},V(y.a,{size:140,url:"".concat(null===(a=E.user_accountData)||void 0===a||null===(r=a.profilePhoto)||void 0===r?void 0:r.src),text:null===(n=E.user_accountData)||void 0===n?void 0:n.username,username:null===(_=E.user_accountData)||void 0===_?void 0:_.username}))),V("div",{className:L.a.user_content},V("div",{className:L.a.user_info},V("div",{className:L.a.heade_section},V("div",{className:L.a.left_side},V("p",{className:L.a.fullname,style:{cursor:"pointer"}},V("span",null,"".concat(null===(k=E.user_accountData)||void 0===k?void 0:k.firstName," ").concat(null===(D=E.user_accountData)||void 0===D?void 0:D.lastName)))),V("div",{className:L.a.right_side},V("p",{className:L.a.rating},V(u.a,{defaultValue:null===(w=E.user_accountData)||void 0===w?void 0:w.rating,style:{color:"#fadb14",fontSize:"30px"},onHoverChange:t=>{"undefined"!==typeof t&&(async t=>{if(""!==T)try{M(P(!0));const a=await Object(m.b)({method:"post",url:"/accounts/rate",data:{username:T,rating:t},headers:{"x-token":e.token}}),{data:o,status:s}=a;201===s?J():l.b.error((null===o||void 0===o?void 0:o.message)||"Something wrong"),M(P(!1)),await a}catch(a){M(P(!1))}})(t)}}),V("span",{className:L.a.rating_text},null===(A=E.user_accountData)||void 0===A?void 0:A.rating))))))):V("div",{className:"border border-gray-300 shadow rounded-md p-4 max-w-sm w-full mx-auto"},V("div",{className:"animate-pulse flex space-x-4"},V("div",{className:"rounded-full bg-gray-400 h-12 w-12"}),V("div",{className:"flex-1 space-y-4 py-1"},V("div",{className:"h-4 bg-gray-400 rounded w-3/4"}),V("div",{className:"space-y-2"},V("div",{className:"h-4 bg-gray-400 rounded"}),V("div",{className:"h-4 bg-gray-400 rounded w-5/6"}))))),V("div",{className:L.a.profile_user_button},E.user_accountData.isFriend?V(d.a,{type:"primary",className:L.a.follow_button,className:L.a.follow_button,onClick:()=>(async t=>{if(""!==t)try{const a=await Object(m.b)({method:"delete",url:"/accounts/friendship",data:{username:t},headers:{"x-token":e.token}}),{data:o,status:s}=a;return 201===s?l.b.success("Deleted Friend successfully"):l.b.error((null===o||void 0===o?void 0:o.message)||"Something wrong"),await a}catch(a){console.log(a)}})(E.user_accountData.username)},"UNFRIEND"):V(d.a,{type:"primary",className:L.a.follow_button,onClick:()=>ie(E.user_accountData.username)},"ADD FRIEND"),V("div",{className:L.a.profile_user_button_space}),E.user_accountData.isFollow?V(d.a,{type:"primary",className:L.a.follow_button,onClick:()=>(async t=>{if(""!==t)try{const a=await Object(m.b)({method:"delete",url:"/accounts/followship",data:{username:t},headers:{"x-token":e.token}}),{data:o,status:s}=a;return void l.b.success("Unfollowed successfully!")}catch(a){M(P(!1))}})(E.user_accountData.username)},"UNFOLLOW"):V(d.a,{type:"primary",className:L.a.follow_button,onClick:()=>(async t=>{if(""!==t)try{M(P(!0));const a=await Object(m.b)({method:"post",url:"/accounts/followship",data:{username:t},headers:{"x-token":e.token}}),{data:o,status:s}=a;return void l.b.success("Followed successfully!")}catch(a){M(P(!1))}})(E.user_accountData.username)},"FOLLOW")),V("div",{className:L.a.profile_content},V("div",{className:L.a.profile_tabs},V(i.a,{defaultActiveKey:"1"},V(Y,{tab:V("span",{className:L.a.tab},"ACTIVITY"),key:"1"},V("h2",{className:L.a.activity_label},"ACTIVITY"),V(F.a,{data:E.activityData,onUpdateTimeline:le,onRatePost:re,likeAction:ne,shareAction:ce,deleteAction:()=>{},disableDelete:!0,auth:e})),V(Y,{tab:V("span",{className:L.a.tab},"FRIENDS"),key:"2"},V("div",{className:c()(L.a.friends_list,L.a.sections_content)},null===E||void 0===E?void 0:E.friendsData.map((e,t)=>V("div",{className:L.a.friend,key:t},V(y.a,{size:80,url:null===e||void 0===e?void 0:e.profilePhoto,text:null===e||void 0===e?void 0:e.username,style:{marginRight:0},username:null===e||void 0===e?void 0:e.username}),V("div",{className:L.a.friend_name},V("p",{style:{textAlign:"left",fontSize:20}},e.firstName," ",e.lastName),V(u.a,{defaultValue:e.rating,style:{color:"#fadb14",fontSize:"15px"}}),V(d.a,{type:"default",shape:"round",size:"small",style:{marginLeft:5},onClick:()=>ie(e.username)},"Friend")))))),V(Y,{tab:V("span",{className:L.a.tab},"PHOTOS"),key:"3"},V("div",{className:L.a.photoSection},V(p.a,{user:E.photosData,onRatePost:re,otherUser:!0,likeAction:ne,shareAction:ce,auth:e,onUpdateTimeline:le}))),V(Y,{tab:V("span",{className:L.a.tab},"RATED"),key:"4"},V(f.a,{user:{recentRated:E.ratesData},onRatePost:re,otherUser:!0})),V(Y,{tab:V("span",{className:L.a.tab},"MARKETPLACE"),key:"5"},V(i.a,{defaultActiveKey:"1"},V(Y,{tab:V("span",{style:{fontSize:20}},"Sale"),key:"1"},V(v.a,{data:E.marketSaleData,otherUser:!0,sale:!0,onRatePost:re,onUpdateComments:de,likeAction:ne,shareAction:ce,getDetailMarketItem:ue})),V(Y,{tab:V("span",{style:{fontSize:20}},"Buy"),key:"2"},V(v.a,{data:E.marketBuyData,otherUser:!0,getDetailMarketItem:ue,onRatePost:re,onUpdateComments:de,likeAction:ne,shareAction:ce})))))),V("div",{className:L.a.mobile_profile_tabs},V("h2",{className:L.a.activity_label},"ACTIVITY"),V(F.a,{data:E.activityData,onUpdateTimeline:le,onRatePost:re,likeAction:ne,shareAction:ce,deleteAction:()=>{},disableDelete:!0,auth:e}),V("h2",{className:L.a.activity_label},"FRIENDS"),V("div",{className:c()(L.a.friends_list,L.a.sections_content)},null===E||void 0===E?void 0:E.friendsData.map((e,t)=>V("div",{className:L.a.friend,key:t},V(y.a,{size:80,url:null===e||void 0===e?void 0:e.profilePhoto,text:null===e||void 0===e?void 0:e.username,username:null===e||void 0===e?void 0:e.username,style:{marginRight:0}}),V("div",{className:L.a.friend_name},V("p",{style:{textAlign:"left",fontSize:20}},e.firstName," ",e.lastName),V(u.a,{defaultValue:e.rating,style:{color:"#fadb14",fontSize:"15px"}}),V(d.a,{type:"default",shape:"round",size:"small",style:{marginLeft:5},onClick:()=>ie(e.username)},"Friend"))))),V("h2",{className:L.a.activity_label},"MARKETPLACE"),V(i.a,{defaultActiveKey:"1"},V(Y,{tab:V("span",{style:{fontSize:20}},"Sale"),key:"1"},V(v.a,{data:E.marketSaleData,otherUser:!0,sale:!0,getDetailMarketItem:ue,onRatePost:re,onUpdateComments:de,likeAction:ne,shareAction:ce})),V(Y,{tab:V("span",{style:{fontSize:20}},"Buy"),key:"2"},V(v.a,{data:E.marketBuyData,otherUser:!0,getDetailMarketItem:ue,onRatePost:re,onUpdateComments:de,likeAction:ne,shareAction:ce}))),V("h2",{className:L.a.activity_label},"PHOTOS"),V(p.a,{user:E.photosData,onRatePost:re,otherUser:!0,likeAction:ne,shareAction:ce,auth:e,onUpdateTimeline:le}),V("h2",{className:L.a.activity_label},"RATED"),V(f.a,{user:{recentRated:E.ratesData},onRatePost:re,otherUser:!0})))),V(h.a,{title:null===G||void 0===G?void 0:G.title,showModal:q,onClose:()=>H(!1)},V(z.a,{loading:E.loading},V(B.a,{data:G,onRatePost:re,onUpdateComments:de,likeAction:ne,shareAction:ce,type:X})))))})),G=s.a.createElement;function W(){return G("div",null,G(T,null,G(H,null)))}}},[["ajk/",0,2,5,10,1,3,4,6,7,8,9,11,12,13,14]]]);