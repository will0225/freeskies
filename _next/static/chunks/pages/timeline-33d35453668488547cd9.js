_N_E=(window.webpackJsonp_N_E=window.webpackJsonp_N_E||[]).push([[24],{"8Bbg":function(e,t,n){e.exports=n("B5Ud")},B3wi:function(e,t,n){"use strict";var r=n("rePB"),a=n("q1tI"),c=n.n(a),o=n("Tyw5"),i=n.n(o),u=n("nOHt"),s=n("TSYQ"),l=n.n(s),d=n("LvDl"),f=n.n(d),p=n("/MKj"),h=n("ffwR"),v=c.a.createElement;function m(e){var t=e.user,n=void 0===t?{}:t,r=Object(u.useRouter)();return v("div",{className:i.a.profile,onClick:function(){r.push("/profile")}},v("div",{className:i.a.avatar},(null===n||void 0===n?void 0:n.profilePhoto)?v(h.a,{size:40,url:null===n||void 0===n?void 0:n.profilePhoto.src,text:null===n||void 0===n?void 0:n.username}):v(h.a,{size:40,text:null===n||void 0===n?void 0:n.firstName})),v("span",{className:i.a.name},"".concat(null===n||void 0===n?void 0:n.firstName)))}t.a=Object(p.b)((function(e){return{user:e.auth.user}}))((function(e){var t=e.withoutSearch,n=e.user,o=Object(a.useState)(0),u=o[0],s=o[1],d=Object(a.useState)(!0),p=d[0],h=d[1],g=function(){try{var e=window.pageYOffset,t=u>e;s(e),h(t)}catch(n){console.log(n)}};return Object(a.useEffect)((function(){try{window.addEventListener("scroll",f.a.throttle(g,250))}catch(e){console.log(e)}return function(){try{window.removeEventListener("scroll",g)}catch(e){console.log(e)}}}),[u]),v(c.a.Fragment,null,v("div",{className:l()(i.a.header,Object(r.a)({},i.a.header_hidden,!p))},v("div",{className:i.a.container},v("div",{className:i.a.logo},v("img",{src:"/logo.png",alt:"logo"})),v("div",{className:i.a.search},!t&&v(c.a.Fragment,null,v("input",{name:"search",placeholder:"Search ..."}),v(m,null))),v(m,{user:n}))),v("div",{className:i.a.additional_header}))}))},B5Ud:function(e,t,n){"use strict";var r=n("o0o1"),a=n("lwsE"),c=n("W8MJ"),o=n("7W2i"),i=n("a1gu"),u=n("Nsbk"),s=n("yXPU");function l(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=u(e);if(t){var a=u(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return i(this,n)}}var d=n("TqRt");t.__esModule=!0,t.Container=function(e){0;return e.children},t.createUrl=g,t.default=void 0;var f=d(n("q1tI")),p=n("g/15");function h(e){return v.apply(this,arguments)}function v(){return(v=s(r.mark((function e(t){var n,a,c;return r.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.Component,a=t.ctx,e.next=3,(0,p.loadGetInitialProps)(n,a);case 3:return c=e.sent,e.abrupt("return",{pageProps:c});case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}t.AppInitialProps=p.AppInitialProps,t.NextWebVitalsMetric=p.NextWebVitalsMetric;var m=function(e){o(n,e);var t=l(n);function n(){return a(this,n),t.apply(this,arguments)}return c(n,[{key:"componentDidCatch",value:function(e,t){throw e}},{key:"render",value:function(){var e=this.props,t=e.router,n=e.Component,r=e.pageProps,a=e.__N_SSG,c=e.__N_SSP;return f.default.createElement(n,Object.assign({},r,a||c?{}:{url:g(t)}))}}]),n}(f.default.Component);function g(e){var t=e.pathname,n=e.asPath,r=e.query;return{get query(){return r},get pathname(){return t},get asPath(){return n},back:function(){e.back()},push:function(t,n){return e.push(t,n)},pushTo:function(t,n){var r=n?t:"",a=n||t;return e.push(r,a)},replace:function(t,n){return e.replace(t,n)},replaceTo:function(t,n){var r=n?t:"",a=n||t;return e.replace(r,a)}}}t.default=m,m.origGetInitialProps=h,m.getInitialProps=h},"Dx8+":function(e,t,n){"use strict";n.r(t),n.d(t,"default",(function(){return x}));var r=n("q1tI"),a=n.n(r),c=n("o0o1"),o=n.n(c),i=n("HaE+"),u=n("B3wi"),s=(n("PObt"),n("A9a1"),n("uoqP")),l=n("tsqr"),d=n("rePB"),f=a.a.createElement;function p(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function h(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?p(Object(n),!0).forEach((function(t){Object(d.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):p(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var v={loading:!1,postingLoading:!1,timelineData:[]};function m(e,t){var n=t.type,r=t.payload;switch(n){case"timeline/SET_LOADING":return h(h({},e),{},{loading:r});case"timeline/SET_POSTING_LOADING":return h(h({},e),{},{postingLoading:r});case"timeline/SET_TIMELINE_DATA":return h(h({},e),{},{timelineData:r});default:return e}}var g=Object(r.createContext)([{},function(){}]),b=function(e){var t=e.children,n=Object(r.useReducer)(m,v);return f(g.Provider,{value:n},t)};function _(e){switch(e){case"timeline":return"timeline/SET_LOADING";case"posting":return"timeline/SET_POSTING_LOADING";default:return""}}var O=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"timeline";return{type:_(t),payload:e}},y=function(e){return{type:"timeline/SET_TIMELINE_DATA",payload:e}},w={icon:{tag:"svg",attrs:{viewBox:"0 0 1024 1024",focusable:"false"},children:[{tag:"path",attrs:{d:"M988 548c-19.9 0-36-16.1-36-36 0-59.4-11.6-117-34.6-171.3a440.45 440.45 0 00-94.3-139.9 437.71 437.71 0 00-139.9-94.3C629 83.6 571.4 72 512 72c-19.9 0-36-16.1-36-36s16.1-36 36-36c69.1 0 136.2 13.5 199.3 40.3C772.3 66 827 103 874 150c47 47 83.9 101.8 109.7 162.7 26.7 63.1 40.2 130.2 40.2 199.3.1 19.9-16 36-35.9 36z"}}]},name:"loading",theme:"outlined"},j=n("6VBw"),N=function(e,t){return r.createElement(j.a,Object.assign({},e,{ref:t,icon:w}))};N.displayName="LoadingOutlined";r.forwardRef(N),a.a.createElement;var E=n("jL+W"),P=a.a.createElement;var S=Object(E.a)((function(e){var t=e.authServices,n=e.auth,c=Object(r.useContext)(g),d=(c[0],c[1]),f=function(){var e=Object(i.a)(o.a.mark((function e(n){var r,a,c,i,u=arguments;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=u.length>1&&void 0!==u[1]&&u[1],e.prev=1,r||d(O(!0)),e.next=5,Object(s.a)({method:"post",url:"/accounts/timeline",headers:{"x-token":n}});case 5:a=e.sent,c=a.data,200===(i=a.status)?(d(y(c)),console.log("=========")):403===i?(console.log("================= Refresh token !"),t.refreshToken(f)):l.b.error((null===c||void 0===c?void 0:c.message)||"Something wrong"),r||d(O(!1)),e.next=15;break;case 11:e.prev=11,e.t0=e.catch(1),console.log(e.t0),r||d(O(!1));case 15:case"end":return e.stop()}}),e,null,[[1,11]])})));return function(t){return e.apply(this,arguments)}}();return Object(r.useEffect)((function(){f(n.token)}),[]),P(a.a.Fragment,null,P(u.a,null))})),T=a.a.createElement;function x(){return T("div",null,T(b,null,T(S,null)))}},Tyw5:function(e,t,n){e.exports={additional_header:"header_additional_header__Wyu42",header:"header_header__ecC39",header_hidden:"header_header_hidden__2Q2DD",container:"header_container__bXWQQ",logo:"header_logo__2MPw_",search:"header_search__sw4Be",profile:"header_profile__1JSwu",name:"header_name__3HhTm",avatar:"header_avatar__boSZH"}},"jL+W":function(e,t,n){"use strict";n.d(t,"a",(function(){return y}));var r=n("wx14"),a=n("Ff2n"),c=n("1OyB"),o=n("vuIU"),i=n("JX7q"),u=n("Ji7U"),s=n("md7G"),l=n("foSv"),d=n("rePB"),f=n("q1tI"),p=n.n(f),h=n("8Bbg"),v=n.n(h),m=n("/MKj"),g=n("nOHt"),b=n.n(g),_=p.a.createElement;function O(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Object(l.a)(e);if(t){var a=Object(l.a)(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return Object(s.a)(this,n)}}function y(e){var t=function(t){Object(u.a)(s,t);var n=O(s);function s(){var e;Object(c.a)(this,s);for(var t=arguments.length,r=new Array(t),a=0;a<t;a++)r[a]=arguments[a];return e=n.call.apply(n,[this].concat(r)),Object(d.a)(Object(i.a)(e),"UNSAFE_componentWillMount",(function(){e.checkAuth(e.props),e.getUserData(),console.log("Test")})),Object(d.a)(Object(i.a)(e),"UNSAFE_componentWillReceiveProps",(function(t){e.checkAuth(t)})),Object(d.a)(Object(i.a)(e),"checkAuth",(function(e){var t=e.authenticated;e.authenticating||t||(console.log("redirect"),b.a.replace("/login?r=".concat(redir.pathname+encodeURIComponent(redir.search)),"/login",{shallow:!0}))})),Object(d.a)(Object(i.a)(e),"getUserData",(function(){(0,e.props.dispatch)({type:"@@auth/GET_USER"})})),Object(d.a)(Object(i.a)(e),"refreshToken",(function(){(0,e.props.dispatch)({type:"@@auth/REFRESH_TOKEN"})})),e}return Object(o.a)(s,[{key:"render",value:function(){var t=this.props,n=t.authenticating,c=(t.authenticated,t.auth),o=Object(a.a)(t,["authenticating","authenticated","auth"]);return n?_("div",{className:"loading-container"},_("div",{className:"border border-gray-300 shadow rounded-md p-4 max-w-sm w-full mx-auto"},_("div",{className:"animate-pulse flex space-x-4"},_("div",{className:"rounded-full bg-gray-400 h-12 w-12"}),_("div",{className:"flex-1 space-y-4 py-1"},_("div",{className:"h-4 bg-gray-400 rounded w-3/4"}),_("div",{className:"space-y-2"},_("div",{className:"h-4 bg-gray-400 rounded"}),_("div",{className:"h-4 bg-gray-400 rounded w-5/6"})))))):_(e,Object(r.a)({},o,{auth:c}))}}]),s}(v.a);return Object(m.b)((function(e){return{authenticating:e.auth.authenticating,auth:e.auth,authenticated:e.auth.authenticated}}))(t)}},mDtT:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/timeline",function(){return n("Dx8+")}])}},[["mDtT",0,2,5,10,1,3,4,6,8,7,9]]]);