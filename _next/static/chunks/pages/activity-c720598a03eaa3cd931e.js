_N_E=(window.webpackJsonp_N_E=window.webpackJsonp_N_E||[]).push([[18],{"07EC":function(e,t,n){"use strict";n.r(t),n.d(t,"default",(function(){return V}));var o=n("q1tI"),a=n.n(o),r=n("KQm4"),s=n("rePB"),i=n("o0o1"),c=n.n(i),u=n("HaE+"),l=n("B3wi"),p=(n("Bfm4"),n("A9a1")),d=n("5D7U"),m=n.n(d),f=n("rOC1"),b=n("ffwR"),v=n("uoqP"),_=n("tsqr"),h=n("jL+W"),g=a.a.createElement;function y(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function O(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?y(Object(n),!0).forEach((function(t){Object(s.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):y(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var j={loading:!1,postingLoading:!1,activityData:[]};function w(e,t){var n=t.type,o=t.payload;switch(n){case"activity/SET_LOADING":return O(O({},e),{},{loading:o});case"activity/SET_POSTING_LOADING":return O(O({},e),{},{postingLoading:o});case"activity/SET_ACTIVITY_DATA":return O(O({},e),{},{activityData:o});default:return e}}var k=Object(o.createContext)([{},function(){}]),P=function(e){var t=e.children,n=Object(o.useReducer)(w,j);return g(k.Provider,{value:n},t)};function x(e){switch(e){case"activity":return"activity/SET_LOADING";case"posting":return"activity/SET_POSTING_LOADING";default:return""}}var D=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"activity";return{type:x(t),payload:e}},C=function(e){return{type:"activity/SET_ACTIVITY_DATA",payload:e}},S=n("PObt"),E=n.n(S),A=n("FVaq"),N=a.a.createElement;function T(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function I(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?T(Object(n),!0).forEach((function(t){Object(s.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):T(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var F=Object(h.a)((function(e){var t,n=e.authServices,s=e.auth,i=Object(o.useContext)(k),d=i[0],h=i[1],g=Object(o.useState)(!1),y=g[0],O=g[1],j=Object(o.useState)(!1),w=(j[0],j[1],function(){var e=Object(u.a)(c.a.mark((function e(t){var o,a,r,s;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Object(v.b)({method:"post",url:"/accounts/activity",headers:{"x-token":t}});case 3:o=e.sent,a=o.data,200===(r=o.status)?(s=a.map((function(e){return e=P(e)})),h(C(s))):403===r?n.refreshToken(w):_.b.error((null===a||void 0===a?void 0:a.message)||"Something wrong"),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),console.log(e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t){return e.apply(this,arguments)}}()),P=function(e){return"Comment"===e.type?"Post"==e.commented.type?I(I({},e.commented),{},{comments:[I({},e)]}):"Comment"==e.commented.type?I(I({},e.commented.commented),{},{comments:[I(I({},e.commented),{},{comments:[e]})]}):"Share"==e.commented.type?I(I({},e.commented.shared),{},{comments:[I({},e)]}):I(I({},e.commented),{},{comments:[I({},e)]}):"Post"===e.type?e:"Share"===e.type?I(I({},e.shared),{},{shares:[I({},e)]}):e},x=function(){var e=Object(u.a)(c.a.mark((function e(t){var n,o,a,i;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,h(D(!0,"posting")),e.next=4,Object(v.b)({method:"post",url:"/posts",data:t,headers:{"x-token":s.token}});case 4:return n=e.sent,o=n.data,201===n.status?(O(0),a=I(I({type:"Post"},o),{},{comments:[],commentsCount:0,rating:null,reactions:[],reactionsCount:0,shares:[],sharesCount:0,account:s.user}),i=[a].concat(Object(r.a)(d.activityData)),console.log(i),h(C(i))):_.b.error((null===o||void 0===o?void 0:o.message)||"Something wrong"),h(D(!1,"posting")),e.next=10,n;case 10:return e.abrupt("return",e.sent);case 13:e.prev=13,e.t0=e.catch(0),h(D(!1,"posting"));case 16:case"end":return e.stop()}}),e,null,[[0,13]])})));return function(t){return e.apply(this,arguments)}}(),S=function(){var e=Object(u.a)(c.a.mark((function e(t,n,o){var a,r,i,u;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,h(D(!0,"posting")),a="","Photo"===t?a="/photos/rate":"VideoClip"===t?a="/video-clips/rate":"Item"===t?a="/items/rate":"Post"===t?a="/posts/rate":"Comment"===t&&(a="/comments/rate"),e.next=6,Object(v.b)({method:"post",url:a,data:{id:n,rating:o},headers:{"x-token":s.token}});case 6:return r=e.sent,i=r.data,u=r.status,console.warn("ratePost",i,u),201===u?(d.activityData.map((function(e){if(e.id===n&&e.type===t)return e.rating=o,e})),h(C(d.activityData))):_.b.error((null===i||void 0===i?void 0:i.message)||"Something wrong"),h(D(!1,"posting")),e.next=13,r;case 13:return e.abrupt("return",e.sent);case 16:e.prev=16,e.t0=e.catch(0),h(D(!1,"posting"));case 19:case"end":return e.stop()}}),e,null,[[0,16]])})));return function(t,n,o){return e.apply(this,arguments)}}(),T=function(){O(!0)},F=function(){var e=Object(u.a)(c.a.mark((function e(t,n,o){var a,r,i;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a="","Photo"===t?a="/photos/react":"VideoClip"===t?a="/video-clips/react":"Item"===t?a="/items/react":"Post"===t?a="/posts/react":"Comment"===t?a="/comments/react":"Share"===t&&(a="/shares/react"),e.prev=2,e.next=5,Object(v.b)({method:"post",url:a,data:{reacted:n,reaction:o},headers:{"x-token":s.token}});case 5:if(r=e.sent,i=r.data,201!==r.status){e.next=11;break}_.b.success("Added successfully"),e.next=13;break;case 11:throw _.b.error((null===i||void 0===i?void 0:i.message)||"Something wrong"),new Error;case 13:e.next=18;break;case 15:e.prev=15,e.t0=e.catch(2),console.log(e.t0);case 18:case"end":return e.stop()}}),e,null,[[2,15]])})));return function(t,n,o){return e.apply(this,arguments)}}(),R=function(){var e=Object(u.a)(c.a.mark((function e(t,n){var o,a,r;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o="","Photo"===t?o="/photos/share":"VideoClip"===t?o="/video-clips/share":"Item"===t?o="/items/share":"Post"===t?o="/posts/share":"Comment"===t?o="/comments/share":"Share"===t&&(o="/posts/share"),e.prev=2,e.next=5,Object(v.b)({method:"post",url:o,data:{shared:n},headers:{"x-token":s.token}});case 5:if(a=e.sent,r=a.data,201!==a.status){e.next=11;break}_.b.success("Shared successfully"),e.next=13;break;case 11:throw _.b.error((null===r||void 0===r?void 0:r.message)||"Something wrong"),new Error;case 13:e.next=18;break;case 15:e.prev=15,e.t0=e.catch(2),console.log(e.t0);case 18:case"end":return e.stop()}}),e,null,[[2,15]])})));return function(t,n){return e.apply(this,arguments)}}(),V=function(){var e=Object(u.a)(c.a.mark((function e(t){var n,o;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Object(v.b)({method:"delete",url:"/posts",data:{id:t},headers:{"x-token":s.token}});case 3:n=e.sent,n.data,400!==n.status?(o=d.activityData.filter((function(e){return e.id!==t})),h(C(o)),_.b.success("Deleted successfully!")):_.b.error("This post deleting does not allowed!"),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),console.log(e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t){return e.apply(this,arguments)}}(),U=function(){var e=Object(u.a)(c.a.mark((function e(t){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:console.log(t);case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();Object(o.useEffect)((function(){w(s.token)}),[]);var L=s.user;return N(a.a.Fragment,null,N(l.a,null),N("div",{className:m.a.feed},N("div",{className:m.a.feed_container},N("div",{className:m.a.createPostDiv},N(b.a,{size:50,url:null===L||void 0===L||null===(t=L.profilePhoto)||void 0===t?void 0:t.src,username:null===L||void 0===L?void 0:L.username}),N("input",{className:m.a.createPostInput,placeholder:"What's on your mind?",onClick:T})),N(A.a,{loading:d.loading},N(E.a,{data:d.activityData,onUpdateTimeline:function(e){d.activityData.map((function(t){if(t.id==e.id){var n=I({account:s.user},e.comments[0]);return"undefined"==typeof t.comments?t.comments=[n]:t.comments.push(n),t.commentsCount+=e.commentsCount,t}})),console.log(d.activityData),h(C(d.activityData))},onRatePost:S,likeAction:F,shareAction:R,deleteAction:V,processedVideoUpdate:U,auth:s})))),N(f.a,{title:"Create Post",showModal:y,onClose:function(){return O(0)}},N(p.a,{loading:d.postingLoading,onPosting:x,modalPopup:T})))})),R=a.a.createElement;function V(){return R("div",null,R(P,null,R(F,null)))}},"5D7U":function(e,t,n){e.exports={feed:"feed_feed__3HJC8",createPostInput:"feed_createPostInput__36HyW",createPostDiv:"feed_createPostDiv__3Zj4X",mobile_profile_header:"feed_mobile_profile_header__2aDWK"}},A9a1:function(e,t,n){"use strict";n.d(t,"a",(function(){return O}));var o=n("rePB"),a=n("ODXe"),r=n("o0o1"),s=n.n(r),i=n("HaE+"),c=n("q1tI"),u=n.n(c),l=n("5rEg"),p=n("ZTPi"),d=n("2/Rp"),m=n("VZWS"),f=n("tsqr"),b=n("QWJe"),v=n.n(b),_=n("VIWY"),h=n("T/mL"),g=u.a.createElement,y=l.a.TextArea;p.a.TabPane;function O(e){var t=e.onPosting,n=e.loading,r=(e.PostingPost,Object(c.useState)("")),u=r[0],l=r[1],p=Object(c.useState)([]),b=p[0],O=p[1],j=function(){var e=Object(i.a)(s.a.mark((function e(){var n,o,a,r,i,c;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(e.prev=0,o=new FormData,a=0;a<b.length;a++)"image"===b[a].type.split("/")[0]?o.append("images",b[a]):o.append("videos",b[a]);return 0!==u.length&&o.append("text",u),n=o,e.next=7,t(n);case 7:r=e.sent,console.log(r),i=r.status,c=r.data,201===i?(f.b.success("Your post published successfuly"),w([]),l("")):f.b.error((null===c||void 0===c?void 0:c.message)||"Something wrong"),e.next=17;break;case 13:e.prev=13,e.t0=e.catch(0),console.log(e.t0),f.b.error("Please try again!");case 17:case"end":return e.stop()}}),e,null,[[0,13]])})));return function(){return e.apply(this,arguments)}}(),w=function(e){O(e)},k=Object(h.b)((function(e){var t=e.in;return g(_.a,Object(o.a)({title:"Photo detail",showModal:t,onClose:x,show:!0},"onClose",x))})),P=Object(a.a)(k,2),x=(P[0],P[1]);return g("div",{className:v.a.activity_posting},g("div",null,g(y,{value:u,onChange:function(e){l(e.target.value)},placeholder:"Write a message",autoSize:{minRows:2,maxRows:5}}),g("div",{className:v.a.file_place},g(m.a,{files:b,onChange:w}))),g("div",{className:v.a.actions_container},g(d.a,{type:"primary",loading:n,onClick:j,style:{width:"100%",fontSize:"20px",height:"50px",borderRadius:"6px"}},"Post")))}},Bfm4:function(e,t,n){"use strict";n.d(t,"a",(function(){return d}));var o=n("q1tI"),a=n.n(o),r=n("aZUF"),s=n.n(r),i=n("2/Rp"),c=(n("TSYQ"),n("nOHt")),u=(n("ffwR"),n("PObt")),l=n.n(u),p=a.a.createElement;function d(e){var t,n=e.user,a=e.onRatePost,r=e.onUpdateTimeline,u=e.processedVideoUpdate,d=e.likeAction,m=e.shareAction,f=e.deleteAction,b=e.auth,v=Object(c.useRouter)(),_=Object(o.useRef)(null),h=Object(o.useState)(null),g=(h[0],h[1],null!==n&&void 0!==n&&"https://freeskies.com/static/".concat(null===(t=n.profilePhoto)||void 0===t?void 0:t.src),null!==n&&void 0!==n?null===n||void 0===n?void 0:n.activity.map((function(e){return e.account=n,e})):[]);return p("div",{className:s.a.activity_content,ref:_},p("div",{className:s.a.section_title},p(i.a,{type:"link",onClick:function(){v.push("/activity")}},"All activities")),0!==g.length&&p(l.a,{data:g,onRatePost:a,onUpdateTimeline:r,processedVideoUpdate:u,likeAction:d,shareAction:m,deleteAction:f,parentDiv:_,auth:b}))}},PObt:function(e,t){throw new Error('Module build failed (from ./node_modules/next/dist/build/webpack/loaders/next-babel-loader.js):\nSyntaxError: D:\\Freeskies-development-\\components\\timeline\\TimelinePosts.js: Unexpected token (233:22)\n\n\x1b[0m \x1b[90m 231 | \x1b[39m                muted\x1b[33m:\x1b[39m \x1b[36mtrue\x1b[39m\x1b[33m,\x1b[39m\x1b[0m\n\x1b[0m \x1b[90m 232 | \x1b[39m                controls\x1b[33m:\x1b[39m \x1b[36mtrue\x1b[39m\x1b[33m,\x1b[39m\x1b[0m\n\x1b[0m\x1b[31m\x1b[1m>\x1b[22m\x1b[39m\x1b[90m 233 | \x1b[39m                poster\x1b[33m=\x1b[39m\x1b[32m`https://www.freeskies.com/static/${video.thumbnail.src}`\x1b[39m\x1b[33m,\x1b[39m\x1b[0m\n\x1b[0m \x1b[90m     | \x1b[39m                      \x1b[31m\x1b[1m^\x1b[22m\x1b[39m\x1b[0m\n\x1b[0m \x1b[90m 234 | \x1b[39m                sources\x1b[33m:\x1b[39m [{\x1b[0m\n\x1b[0m \x1b[90m 235 | \x1b[39m                  src\x1b[33m:\x1b[39m \x1b[32m`https://www.freeskies.com/static/${video.src}`\x1b[39m\x1b[33m,\x1b[39m\x1b[0m\n\x1b[0m \x1b[90m 236 | \x1b[39m                  type\x1b[33m:\x1b[39m \x1b[32m"application/x-mpegURL"\x1b[39m\x1b[33m,\x1b[39m\x1b[0m\n    at Object._raise (D:\\Freeskies-development-\\node_modules\\@babel\\parser\\lib\\index.js:748:17)\n    at Object.raiseWithData (D:\\Freeskies-development-\\node_modules\\@babel\\parser\\lib\\index.js:741:17)\n    at Object.raise (D:\\Freeskies-development-\\node_modules\\@babel\\parser\\lib\\index.js:735:17)\n    at Object.unexpected (D:\\Freeskies-development-\\node_modules\\@babel\\parser\\lib\\index.js:9097:16)\n    at Object.checkExpressionErrors (D:\\Freeskies-development-\\node_modules\\@babel\\parser\\lib\\index.js:9185:12)\n    at Object.parseMaybeAssign (D:\\Freeskies-development-\\node_modules\\@babel\\parser\\lib\\index.js:9925:12)\n    at D:\\Freeskies-development-\\node_modules\\@babel\\parser\\lib\\index.js:9865:39\n    at Object.allowInAnd (D:\\Freeskies-development-\\node_modules\\@babel\\parser\\lib\\index.js:11521:12)\n    at Object.parseMaybeAssignAllowIn (D:\\Freeskies-development-\\node_modules\\@babel\\parser\\lib\\index.js:9865:17)\n    at Object.parseVar (D:\\Freeskies-development-\\node_modules\\@babel\\parser\\lib\\index.js:12316:70)')},QWJe:function(e,t,n){e.exports={activity_posting:"posting-post_activity_posting__1baua",actions_container:"posting-post_actions_container__3aGDl","button-container":"posting-post_button-container__1Q6oN","ant-btn-primary":"posting-post_ant-btn-primary__3UutL",file_place:"posting-post_file_place__2POpB"}},VIWY:function(e,t,n){"use strict";n.d(t,"a",(function(){return m}));var o=n("Ff2n"),a=n("q1tI"),r=n.n(a),s=n("9rZX"),i=n.n(s),c=n("4i/N"),u=n("QWJe"),l=n.n(u),p=(n("TSYQ"),r.a.createElement),d={content:{},overlay:{backgroundColor:"rgba(50, 50, 50, .8)"}};function m(e){var t=e.children,n=(e.narrow_container,e.title,e.show),a=e.handleHide;Object(o.a)(e,["children","narrow_container","title","show","handleHide"]);return console.log(n),p(i.a,{isOpen:n,style:d,shouldCloseOnOverlayClick:!0,onRequestClose:a},p("div",{className:l.a.header},p("button",{className:l.a.close,type:"button",onClick:a},p(c.a,null))),p("div",{className:l.a.content},t))}},aZUF:function(e,t,n){e.exports={activity_content:"feed-post_activity_content__3N-h7",section_title:"feed-post_section_title__1we2Z",post:"feed-post_post__bhijE",post_header:"feed-post_post_header__1Sj-6",avatar:"feed-post_avatar__O0xLc",user_info:"feed-post_user_info__29hGR",user_name:"feed-post_user_name__5k8XZ",date:"feed-post_date__2-Vtb",post_content:"feed-post_post_content__2oE53",description:"feed-post_description__10C5X",image:"feed-post_image__3H2wO",post_actions:"feed-post_post_actions__1-APA",posts:"feed-post_posts__3gKRn",comments:"feed-post_comments__2alYi"}},pAKN:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/activity",function(){return n("07EC")}])}},[["pAKN",0,2,4,1,3,6,5,7,8]]]);